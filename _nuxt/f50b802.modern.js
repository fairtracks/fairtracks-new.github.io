(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1050:function(e,t){function i(e,t,i,s,n,r,o){try{var a=e[r](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(s,n)}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).filter((e=>!t.includes(e))).reduce(((t,i)=>Object.assign(t,{[i]:e[i]})),{})};e.exports=class{constructor(e,t){var{query:i,path:n,init:r,text:o,postprocess:a=[]}=e;this.query=i,this.path=n,this.init=r,this.postprocess=a,this.options=t||{},this.onlyKeys=null,this.withoutKeys=null,this.sortKeys=[],this.limitN=null,this.skipN=null,o||this.postprocess.unshift((e=>e.map((e=>s(e,["text"])))))}only(e){return this.onlyKeys=Array.isArray(e)?e:[e],this}without(e){return this.withoutKeys=Array.isArray(e)?e:[e],this}sortBy(e,t){return this.sortKeys.push([e,"desc"===t]),this}where(e){return this.query=this.query.find(e),this}search(e,t){return e?(i="object"==typeof e?e:t?{query:{type:"match",field:e,value:t,prefix_length:1,fuzziness:1,extended:!0,minimum_should_match:1}}:{query:{type:"bool",should:this.options.fullTextSearchFields.map((t=>({type:"match",field:t,value:e,prefix_length:1,operator:"and",minimum_should_match:1,fuzziness:1,extended:!0})))}},this.query=this.query.find({$fts:i}).sortByScoring(),this):this;var i}surround(e){var{before:t=1,after:i=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=0===e.indexOf("/")?"path":"slug";this.onlyKeys&&this.onlyKeys.push(s),this.withoutKeys&&(this.withoutKeys=this.withoutKeys.filter((e=>e!==s)));return this.postprocess.push((n=>{var r=n.findIndex((t=>t[s]===e)),o=new Array(t+i).fill(null,0);if(-1===r)return o;for(var a=n.slice(r-t,r),l=n.slice(r+1,r+1+i),h=0,d=t-1;d>=0;d--)o[d]=a[h]||null,h++;for(var c=0,u=t;u<=i;u++)o[u]=l[c]||null,c++;return o})),this}limit(e){return"string"==typeof e&&(e=parseInt(e)),this.limitN=e,this}skip(e){return"string"==typeof e&&(e=parseInt(e)),this.skipN=e,this}fetch(){var e,t=this;return(e=function*(){t.sortKeys&&t.sortKeys.length&&(t.query=t.query.compoundsort(t.sortKeys)),t.skipN&&(t.query=t.query.offset(t.skipN)),t.limitN&&(t.query=t.query.limit(t.limitN));var e=t.query.data({removeMeta:!0});for(var i of(t.onlyKeys&&(t.options.watch&&t.onlyKeys.push("path","extension"),t.postprocess.unshift((e=>e.map((e=>function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(e).filter((e=>t.includes(e))).reduce(((t,i)=>Object.assign(t,{[i]:e[i]})),{})}(e,t.onlyKeys)))))),t.withoutKeys&&(t.options.watch&&(t.withoutKeys=t.withoutKeys.filter((e=>!["path","extension"].includes(e)))),t.postprocess.unshift((e=>e.map((e=>s(e,t.withoutKeys)))))),t.postprocess))e=i(e);if(!e)throw new Error("".concat(t.path," not found"));return JSON.parse(JSON.stringify(e))},function(){var t=this,s=arguments;return new Promise((function(n,r){var o=e.apply(t,s);function a(e){i(o,n,r,a,l,"next",e)}function l(e){i(o,n,r,a,l,"throw",e)}a(void 0)}))})()}}},1051:function(e,t,i){var s;"undefined"!=typeof self&&self,s=function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8)}([function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i(2);let n={js:(e,t)=>e===t?0:e<t?-1:1,"abstract-js":(e,t)=>e==t?0:e<t?-1:1,"abstract-date":(e,t)=>{let i=new Date(e).toISOString(),s=new Date(t).toISOString();return i==s?0:i<s?-1:1},loki:(e,t)=>Object(s.b)(e,t)?0:Object(s.c)(e,t,!1)?-1:1}},function(e,t,i){"use strict";(function(e){function s(){let t;return function(e){t=e}(void 0!==e&&e||this),t}i.d(t,"a",(function(){return n}));const n=function(){const e=s(),t=Symbol.for("LOKI");return void 0===e[t]&&(e[t]={}),e[t]}()}).call(this,i(7))},function(e,t,i){"use strict";function s(e,t){if(e===t)return!0;if(!e||!t||!0===e||!0===t||e!=e||t!=t){let i,s;switch(e){case void 0:case null:i=1;break;case!1:i=3;break;case!0:i=4;break;case"":i=5;break;default:i=e==e?9:0}switch(t){case void 0:case null:s=1;break;case!1:s=3;break;case!0:s=4;break;case"":s=5;break;default:s=t==t?9:0}if(9!==i||9!==s)return i===s}let i=Number(e),s=Number(t);return i==i||s==s?i===s:(i=e.toString(),s=t.toString(),i==s)}function n(e,t,i){if(!e||!t||!0===e||!0===t||e!=e||t!=t){let s,n;switch(e){case void 0:case null:s=1;break;case!1:s=3;break;case!0:s=4;break;case"":s=5;break;default:s=e==e?9:0}switch(t){case void 0:case null:n=1;break;case!1:n=3;break;case!0:n=4;break;case"":n=5;break;default:n=t==t?9:0}if(9!==s||9!==n)return s===n?i:s<n}let s=Number(e),n=Number(t);return s==s&&n==n?s<n||!(s>n)&&i:s==s&&n!=n||(n!=n||s==s)&&(e<t||!(e>t)&&(e==t?i:(s=e.toString(),n=t.toString(),s<n||s==n&&i)))}function r(e,t,i){if(!e||!t||!0===e||!0===t||e!=e||t!=t){let s,n;switch(e){case void 0:case null:s=1;break;case!1:s=3;break;case!0:s=4;break;case"":s=5;break;default:s=e==e?9:0}switch(t){case void 0:case null:n=1;break;case!1:n=3;break;case!0:n=4;break;case"":n=5;break;default:n=t==t?9:0}if(9!==s||9!==n)return s===n?i:s>n}let s=Number(e),n=Number(t);return s==s&&n==n?s>n||!(s<n)&&i:(s!=s||n==n)&&(n==n&&s!=s||e>t||!(e<t)&&(e==t?i:(s=e.toString(),n=t.toString(),s>n||s==n&&i)))}function o(e,t,i){return s(e,t)?0:n(e,t,!1)?i?1:-1:r(e,t,!1)?i?-1:1:0}i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return n})),i.d(t,"d",(function(){return o})),i.d(t,"a",(function(){return l}));class a{$eq(e,t){return e===t}$ne(e,t){return e!==t}$gt(e,t){return e>t}$gte(e,t){return e>=t}$lt(e,t){return e<t}$lte(e,t){return e<=t}$between(e,t){return null!=e&&e>=t[0]&&e<=t[1]}$in(e,t){return-1!==t.indexOf(e)}$nin(e,t){return-1===t.indexOf(e)}$keyin(e,t){return e in t}$nkeyin(e,t){return!(e in t)}$definedin(e,t){return void 0!==t[e]}$undefinedin(e,t){return void 0===t[e]}$regex(e,t){return t.test(e)}$containsNone(e,t){return!this.$containsAny(e,t)}$containsAny(e,t){const i=this.containsCheckFn(e);return null!==i&&(Array.isArray(t)?t.some(i):i(t))}$contains(e,t){const i=this.containsCheckFn(e);return null!==i&&(Array.isArray(t)?t.every(i):i(t))}$type(e,t){let i=typeof e;return"object"===i&&(Array.isArray(e)?i="array":e instanceof Date&&(i="date")),"object"!=typeof t?i===t:this.doQueryOp(i,t)}$finite(e,t){return t===isFinite(e)}$size(e,t){return!!Array.isArray(e)&&("object"!=typeof t?e.length===t:this.doQueryOp(e.length,t))}$len(e,t){return"string"==typeof e&&("object"!=typeof t?e.length===t:this.doQueryOp(e.length,t))}$where(e,t){return!0===t(e)}$not(e,t){return!this.doQueryOp(e,t)}$and(e,t){for(let i=0,s=t.length;i<s;i++)if(!this.doQueryOp(e,t[i]))return!1;return!0}$or(e,t){for(let i=0,s=t.length;i<s;i++)if(this.doQueryOp(e,t[i]))return!0;return!1}doQueryOp(e,t){for(let i in t)if(Object.hasOwnProperty.call(t,i))return this[i](e,t[i]);return!1}containsCheckFn(e){return"string"==typeof e||Array.isArray(e)?t=>-1!==e.indexOf(t):"object"==typeof e&&null!==e?t=>Object.hasOwnProperty.call(e,t):null}}let l={js:new a,loki:new class extends a{constructor(){super()}$eq(e,t){return s(e,t)}$ne(e,t){return!s(e,t)}$gt(e,t){return r(e,t,!1)}$gte(e,t){return r(e,t,!0)}$lt(e,t){return n(e,t,!1)}$lte(e,t){return n(e,t,!0)}$between(e,t){return null!=e&&r(e,t[0],!0)&&n(e,t[1],!0)}}}},function(e,t,i){"use strict";var s=i(5);class n{constructor(e){this._field=e,this._lokiMap={},this._valMap={}}set(e,t){if(null!=t){if(t in this._lokiMap)throw new Error("Duplicate key for property "+this._field+": "+t);if(e in this._valMap)throw new Error("Duplicate key for property $loki : "+e);this._lokiMap[t]=e,this._valMap[e]=t}}get(e){return this._lokiMap[e]}update(e,t){if(t!==this._valMap[e]){if(t in this._lokiMap)throw new Error("Duplicate key for property "+this._field+": "+t);this.remove(e),this.set(e,t)}}remove(e){if(!(e in this._valMap))throw new Error("Key is not in unique index: "+this._field);let t=this._valMap[e];delete this._lokiMap[t],delete this._valMap[e]}clear(){this._lokiMap={},this._valMap={}}}function r(e,t,i){return e instanceof Array?(e.push(i),e[e.length-1]):e instanceof Object?(e[t]=i,e[t]):void 0}function o(e,t){for(let i in e){let s=e[i];s instanceof Date?r(t,i,new Date(s.getTime())):s instanceof Function?r(t,i,s):s instanceof Array?o(s,r(t,i,[])):s instanceof Object?o(s,r(t,i,{})):r(t,i,s)}}function a(e){if(/number|string|boolean/.test(typeof e))return e;if(e instanceof Date)return new Date(e.getTime());const t=e instanceof Array?[]:{};return o(e,t),t}function l(e,t="parse-stringify"){if(null==e)return null;let i;switch(t){case"parse-stringify":i=JSON.parse(JSON.stringify(e));break;case"deep":i=a(e);break;case"shallow":i=Object.create(e.constructor.prototype),Object.assign(i,e);break;case"shallow-recurse":i=l(e,"shallow");const t=Object.keys(e);for(let s=0;s<t.length;s++){const n=t[s];"object"==typeof e[n]&&"Object"===e[n].constructor.name&&(i[n]=l(e[n],"shallow-recurse"))}}return i}var h=i(2),d=i(0);function c(e,t,i=0){if(++i>=10)return e;for(const s in e)if("string"==typeof e[s]&&0===e[s].indexOf("[%lktxp]")){const i=e[s].substring(8);void 0!==t[i]&&(e[s]=t[i])}else"object"==typeof e[s]&&(e[s]=c(e[s],t,i));return e}const u={$eq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};class f{constructor(e){this._filteredRows=[],this._filterInitialized=!1,this._scoring=null,this._collection=e}reset(){return this._filteredRows.length>0&&(this._filteredRows=[]),this._filterInitialized=!1,this}toJSON(){const e=this.copy();return e._collection=null,e}limit(e){return this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex()),this._filteredRows=this._filteredRows.slice(0,e),this._filterInitialized=!0,this}offset(e){return this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex()),this._filteredRows=this._filteredRows.slice(e),this._filterInitialized=!0,this}copy(){const e=new f(this._collection);return e._filteredRows=this._filteredRows.slice(),e._filterInitialized=this._filterInitialized,e}transform(e,t){"string"==typeof e&&(e=this._collection._transforms[e]),void 0!==t&&(e=function(e,t){if(void 0===t)return e;const i=[];for(let s=0;s<e.length;s++){const n=l(e[s],"shallow-recurse");i.push(c(n,t))}return i}(e,t));let i=this;for(let t=0;t<e.length;t++){const s=e[t];switch(s.type){case"find":i.find(s.value);break;case"where":i.where(s.value);break;case"simplesort":i.simplesort(s.property,s.options);break;case"compoundsort":i.compoundsort(s.value);break;case"sort":i.sort(s.value);break;case"sortByScoring":i.sortByScoring(s.desc);break;case"limit":i=i.limit(s.value);break;case"offset":i=i.offset(s.value);break;case"map":i=i.map(s.value,s.dataOptions);break;case"eqJoin":i=i.eqJoin(s.joinData,s.leftJoinKey,s.rightJoinKey,s.mapFun,s.dataOptions);break;case"mapReduce":i=i.mapReduce(s.mapFunction,s.reduceFunction);break;case"update":i.update(s.value);break;case"remove":i.remove()}}return i}sort(e){this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const t=this._collection._data;return this._filteredRows.sort(((i,s)=>e(t[i],t[s]))),this}simplesort(e,t={desc:!1}){if("boolean"==typeof t&&(t={desc:t}),!this._filterInitialized&&this._collection._rangedIndexes.hasOwnProperty(e)){let i=this._collection._rangedIndexes[e].index.rangeRequest(),s=[];for(let e of i)s.push(this._collection.get(e,!0)[1]);return this._filteredRows=t.desc?s.reverse():s,this._filterInitialized=!0,this}this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const i=this._collection._data;let s=t.sortComparator?d.a[t.sortComparator]:d.a[this._collection._unindexedSortComparator];return this._filteredRows.sort(((t,n)=>s(i[t][e],i[n][e]))),t.desc&&this._filteredRows.reverse(),this}compoundsort(e){if(0===e.length)throw new Error("Invalid call to compoundsort, need at least one property");if(1===e.length){const t=e[0];return"string"==typeof t?this.simplesort(t,!1):this.simplesort(t[0],t[1])}for(let t=0,i=e.length;t<i;t++){const i=e[t];"string"==typeof i&&(e[t]=[i,!1])}this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const t=this._collection._data;return this._filteredRows.sort(((i,s)=>this._compoundeval(e,t[i],t[s]))),this}_compoundeval(e,t,i){for(let s=0,n=e.length;s<n;s++){const n=e[s],r=n[0],o=Object(h.d)(t[r],i[r],n[1]);if(0!==o)return o}return 0}sortByScoring(e=!1){if(null===this._scoring)throw new Error("No scoring available");return e?this._filteredRows.sort(((e,t)=>this._scoring[e].score-this._scoring[t].score)):this._filteredRows.sort(((e,t)=>this._scoring[t].score-this._scoring[e].score)),this}getScoring(){if(null===this._scoring)throw new Error("No scoring available");const e=[];for(let t=0;t<this._filteredRows.length;t++)e.push(this._scoring[this._filteredRows[t]]);return e}findOr(e){const t=[],i=[],s=this.count();for(let n=0,r=e.length;n<r;n++){const r=this.copy().find(e[n])._filteredRows,o=r.length;if(o===s)return this;for(let e=0;e<o;e++){const s=r[e];void 0===i[s]&&(i[s]=!0,t.push(s))}}return this._filteredRows=t,this._filterInitialized=!0,this}$or(e){return this.findOr(e)}findAnd(e){for(let t=0,i=e.length;t<i;t++){if(0===this.count())return this;this.find(e[t])}return this}$and(e){return this.findAnd(e)}find(e,t=!1){if(0===this._collection._data.length)return this._filteredRows=[],this._filterInitialized=!0,this;const i=e||"getAll";let s,n,r;if("object"==typeof i){let e=[];for(let t in i){let r={};r[t]=i[t],e.push(r),void 0!==i[t]&&(s=t,n=i[t])}if(e.length>1)return this.find({$and:e},t)}if(!s||"getAll"===i)return t&&(this._filteredRows=this._collection._data.length>0?[0]:[],this._filterInitialized=!0),this;if("$and"===s||"$or"===s)return this[s](n),t&&this._filteredRows.length>1&&(this._filteredRows=this._filteredRows.slice(0,1)),this;let o="";if(null===n||"object"!=typeof n||n instanceof Date)o="$eq",r=n;else{if("object"!=typeof n)throw new Error("Do not know what you want to do.");for(let e in n)if(void 0!==n[e]){o=e,r=n[e];break}}"$regex"===o&&(Array.isArray(r)?r=new RegExp(r[0],r[1]):r instanceof RegExp||(r=new RegExp(r)));let a=!1;!this._filterInitialized&&this._collection._rangedIndexes[s]&&u[o]&&(a=!0);const l=h.a[this._collection._defaultLokiOperatorPackage],d=this._collection._data;let c=[];if(this._filterInitialized){let e=this._filteredRows;if("$fts"===s){this._scoring=this._collection._fullTextSearch.search(i.$fts);let t=Object.keys(this._scoring);for(let i=0;i<t.length;i++)-1!==e.indexOf(+t[i])&&c.push(+t[i])}else if(void 0!==this._collection._constraints.unique[s]&&"$eq"===o){const t=this._collection._constraints.unique[s].get(r);if(void 0!==t){const i=this._collection.get(t,!0)[1];-1!==e.indexOf(i)&&c.push(i)}}else for(let t=0;t<e.length;t++){let i=e[t];l[o](d[i][s],r)&&c.push(i)}return this._filteredRows=c,this._filterInitialized=!0,this}if(this._filteredRows=c,this._filterInitialized=!0,"$fts"===s){this._scoring=this._collection._fullTextSearch.search(i.$fts);let e=Object.keys(this._scoring);for(let t=0;t<e.length;t++)c.push(+e[t]);return this}if(void 0!==this._collection._constraints.unique[s]&&"$eq"===o){const e=this._collection._constraints.unique[s].get(r);return void 0!==e&&c.push(this._collection.get(e,!0)[1]),this}if(!a){for(let e=0;e<d.length;e++)if(l[o](d[e][s],r)&&(c.push(e),t))return this;return this}if(this._collection._rangedIndexes[s]){if("$in"===o){let e=this._collection._rangedIndexes[s];for(let t of r){let i=e.index.rangeRequest({op:"$eq",val:t});for(let e of i)c.push(this._collection.get(e,!0)[1])}return this}if("$between"===o){let e=this._collection._rangedIndexes[s].index.rangeRequest({op:o,val:r[0],high:r[1]});for(let t of e)c.push(this._collection.get(t,!0)[1]);return this}let e=this._collection._rangedIndexes[s].index.rangeRequest({op:o,val:r});if(!0!==u[o])for(let t of e){let e=this._collection.get(t,!0)[1];u[o](d[e][s],r)&&c.push(e)}else for(let t of e)c.push(this._collection.get(t,!0)[1])}return this}where(e){let t,i=[];if("function"!=typeof e)throw new TypeError("Argument is not a stored view or a function");if(t=e,this._filterInitialized){let e=this._filteredRows.length;for(;e--;)!0===t(this._collection._data[this._filteredRows[e]])&&i.push(this._filteredRows[e]);return this._filteredRows=i,this}{let e=this._collection._data.length;for(;e--;)!0===t(this._collection._data[e])&&i.push(e);return this._filteredRows=i,this._filterInitialized=!0,this}}count(){return this._filterInitialized?this._filteredRows.length:this._collection.count()}data(e={}){let t,i,s;({forceClones:t=!1,forceCloneMethod:i=this._collection._cloneMethod,removeMeta:s=!1}=e);let n,r,o=[],a=this._collection._data;if(s&&!t&&(t=!0,i="shallow"),this._collection._disableDeltaChangesApi||(t=!0,i="deep"),!this._filterInitialized){if(0===this._filteredRows.length){if(this._collection._cloneObjects||t){r=i;for(let e=0;e<a.length;e++)n=this._collection._defineNestedProperties(l(a[e],r)),s&&(delete n.$loki,delete n.meta),o.push(n);return o}return a.slice()}this._filterInitialized=!0}const h=this._filteredRows;if(this._collection._cloneObjects||t){r=i;for(let e=0;e<h.length;e++)n=this._collection._defineNestedProperties(l(a[h[e]],r)),s&&(delete n.$loki,delete n.meta),o.push(n)}else for(let e=0;e<h.length;e++)o.push(a[h[e]]);return o}update(e){this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const t=this._filteredRows.length,i=this._collection._data;for(let s=0;s<t;s++)if(this._collection._cloneObjects||!this._collection._disableDeltaChangesApi){const t=l(i[this._filteredRows[s]],this._collection._cloneMethod);e(t),this._collection.update(t)}else e(i[this._filteredRows[s]]),this._collection.update(i[this._filteredRows[s]]);return this}remove(){return this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex()),this._collection.remove(this.data()),this._filteredRows=[],this}mapReduce(e,t){try{return t(this.data().map(e))}catch(e){throw e}}eqJoin(e,t,i,s,n){let r,o,a=[],l=[],h="function"==typeof t,d="function"==typeof i,c={},u=this.data(n),_=u.length;if(e instanceof v)a=e.chain().data(n);else if(e instanceof f)a=e.data(n);else{if(!Array.isArray(e))throw new TypeError("joinData needs to be an array or result set");a=e}r=a.length;for(let e=0;e<r;e++)o=d?i(a[e]):a[e][i],c[o]=a[e];s||(s=(e,t)=>({left:e,right:t}));for(let e=0;e<_;e++)o=h?t(u[e]):u[e][t],l.push(s(u[e],c[o]||{}));return this._collection=new v("joinData"),this._collection.insert(l),this._filteredRows=[],this._filterInitialized=!1,this}map(e,t){const i=this.data(t).map(e);return this._collection=new v("mappedData"),this._collection.insert(i),this._filteredRows=[],this._filterInitialized=!1,this}}class _ extends s.a{constructor(e,t,i={}){super(),this._rebuildPending=!1,this._resultData=[],this._resultDirty=!1,this._cachedResultSet=null,this._filterPipeline=[],this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._sortDirty=!1,({persistent:this._persistent=!1,sortPriority:this._sortPriority="passive",minRebuildInterval:this._minRebuildInterval=1}=i),this._collection=e,this.name=t,this._resultSet=new f(e),this._events={rebuild:[]}}_rematerialize({removeWhereFilters:e=!1}){if(this._resultData=[],this._resultDirty=!0,this._resultSet=new f(this._collection),(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||null!==this._sortByScoring)&&(this._sortDirty=!0),e){let e=this._filterPipeline.length;for(;e--;)"where"===this._filterPipeline[e].type&&(e!==this._filterPipeline.length-1&&(this._filterPipeline[e]=this._filterPipeline[this._filterPipeline.length-1]),this._filterPipeline.length--)}const t=this._filterPipeline;this._filterPipeline=[];for(let e=0;e<t.length;e++)this.applyFind(t[e].val);return this.data(),this.emit("rebuild",this),this}branchResultSet(e,t){const i=this._resultSet.copy();return void 0===e?i:i.transform(e,t)}toJSON(){return{name:this.name,_persistent:this._persistent,_sortPriority:this._sortPriority,_minRebuildInterval:this._minRebuildInterval,_resultSet:this._resultSet,_filterPipeline:this._filterPipeline,_sortCriteria:this._sortCriteria,_sortCriteriaSimple:this._sortCriteriaSimple,_sortByScoring:this._sortByScoring,_sortDirty:this._sortDirty}}static fromJSONObject(e,t){let i=new _(e,t.name);return i._resultDirty=!0,i._filterPipeline=t._filterPipeline,i._resultData=[],i._sortCriteria=t._sortCriteria,i._sortCriteriaSimple=t._sortCriteriaSimple,i._sortByScoring=t._sortByScoring,i._sortDirty=t._sortDirty,i._resultSet._filteredRows=t._resultSet._filteredRows,i._resultSet._filterInitialized=t._resultSet._filterInitialized,i._rematerialize({removeWhereFilters:!0}),i}removeFilters({queueSortPhase:e=!1}={}){this._rebuildPending=!1,this._resultSet.reset(),this._resultData=[],this._resultDirty=!0,this._cachedResultSet=null,this._filterPipeline=[],this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._sortDirty=!1,!0===e&&this._queueSortPhase()}applySort(e){return this._sortFunction=e,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._queueSortPhase(),this}applySimpleSort(e,t=!1){return this._sortCriteriaSimple={field:e,options:t},this._sortFunction=null,this._sortCriteria=null,this._sortByScoring=null,this._queueSortPhase(),this}applySortCriteria(e){return this._sortCriteria=e,this._sortCriteriaSimple=null,this._sortFunction=null,this._sortByScoring=null,this._queueSortPhase(),this}applySortByScoring(e=!1){return this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=e,this._queueSortPhase(),this}getScoring(){return this._resultSet.getScoring()}startTransaction(){return this._cachedResultSet=this._resultSet.copy(),this}commit(){return this._cachedResultSet=null,this}rollback(){return this._resultSet=this._cachedResultSet,this._persistent&&(this._resultData=this._resultSet.data(),this.emit("rebuild",this)),this}_indexOfFilterWithId(e){if("string"==typeof e||"number"==typeof e)for(let t=0,i=this._filterPipeline.length;t<i;t++)if(e===this._filterPipeline[t].uid)return t;return-1}_addFilter(e){this._filterPipeline.push(e),this._resultSet[e.type](e.val)}reapplyFilters(){this._resultSet.reset(),this._cachedResultSet=null,this._persistent&&(this._resultData=[],this._resultDirty=!0);const e=this._filterPipeline;this._filterPipeline=[];for(let t=0,i=e.length;t<i;t++)this._addFilter(e[t]);return this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||null!==this._sortByScoring?this._queueSortPhase():this._queueRebuildEvent(),this}applyFilter(e){const t=this._indexOfFilterWithId(e.uid);return t>=0?(this._filterPipeline[t]=e,this.reapplyFilters()):(this._cachedResultSet=null,this._persistent&&(this._resultData=[],this._resultDirty=!0),this._addFilter(e),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||null!==this._sortByScoring?this._queueSortPhase():this._queueRebuildEvent(),this)}applyFind(e,t=""){return this.applyFilter({type:"find",val:e,uid:t}),this}applyWhere(e,t){return this.applyFilter({type:"where",val:e,uid:t}),this}removeFilter(e){const t=this._indexOfFilterWithId(e);if(t<0)throw new Error("Dynamic view does not contain a filter with ID: "+e);return this._filterPipeline.splice(t,1),this.reapplyFilters(),this}count(){return this._resultDirty&&(this._resultData=this._resultSet.data()),this._resultSet.count()}data(e={}){return(this._sortDirty||this._resultDirty)&&this._performSortPhase({suppressRebuildEvent:!0}),this._persistent?this._resultData:this._resultSet.data(e)}_queueRebuildEvent(){this._rebuildPending||(this._rebuildPending=!0,setTimeout((()=>{this._rebuildPending&&(this._rebuildPending=!1,this.emit("rebuild",this))}),this._minRebuildInterval))}_queueSortPhase(){this._sortDirty||(this._sortDirty=!0,"active"===this._sortPriority?setTimeout((()=>{this._performSortPhase()}),this._minRebuildInterval):this._queueRebuildEvent())}_performSortPhase(e={}){(this._sortDirty||this._resultDirty)&&(this._sortDirty&&(this._sortFunction?this._resultSet.sort(this._sortFunction):this._sortCriteria?this._resultSet.compoundsort(this._sortCriteria):this._sortCriteriaSimple?this._resultSet.simplesort(this._sortCriteriaSimple.field,this._sortCriteriaSimple.options):null!==this._sortByScoring&&this._resultSet.sortByScoring(this._sortByScoring),this._sortDirty=!1),this._persistent&&(this._resultData=this._resultSet.data(),this._resultDirty=!1),e.suppressRebuildEvent||this.emit("rebuild",this))}_evaluateDocument(e,t){if(!this._resultSet._filterInitialized)return this._persistent&&(this._resultData=this._resultSet.data()),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent());const i=this._resultSet._filteredRows,s=t?-1:i.indexOf(+e),n=i.length,r=new f(this._collection);let o;r._filteredRows=[e],r._filterInitialized=!0;for(let e=0,t=this._filterPipeline.length;e<t;e++)o=this._filterPipeline[e],r[o.type](o.val);const a=0===r._filteredRows.length?-1:0;return-1!==s||-1!==a?-1===s&&-1!==a?(i.push(e),this._persistent&&this._resultData.push(this._collection._data[e]),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())):-1!==s&&-1===a?(s<n-1?(i.splice(s,1),this._persistent&&this._resultData.splice(s,1)):(i.length=n-1,this._persistent&&(this._resultData.length=n-1)),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())):void(-1!==s&&-1!==a&&(this._persistent&&(this._resultData[s]=this._collection._data[e]),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())):void 0}_removeDocument(e){if(!this._resultSet._filterInitialized)return this._persistent&&(this._resultData=this._resultSet.data()),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent());const t=this._resultSet._filteredRows,i=t.indexOf(+e);let s=t.length;-1!==i&&(i<s-1?(t[i]=t[s-1],t.length=s-1,this._persistent&&(this._resultData[i]=this._resultData[s-1],this._resultData.length=s-1)):(t.length=s-1,this._persistent&&(this._resultData.length=s-1)),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent()),s=t.length;for(let i=0;i<s;i++)t[i]>e&&t[i]--}mapReduce(e,t){try{return t(this.data().map(e))}catch(e){throw e}}}var p=i(4),g=i(1);function w(e){return e.reduce(((e,t)=>e+t),0)/e.length}function m(e,t,i,s=0){if(void 0===e)return!1;if(s+1===t.length)return i.push(e[t[s]]),!1;const n=e[t[s]];if(Array.isArray(n)){for(let e=0;e<n.length;e++)m(n[e],t,i,s+1);return!0}return m(n,t,i,s+1)}i.d(t,"a",(function(){return v}));class v extends s.a{constructor(e,t={}){if(super(),this._data=[],this._idIndex=[],this._rangedIndexes={},this._lokimap={},this._unindexedSortComparator="js",this._defaultLokiOperatorPackage="js",this._constraints={unique:{}},this._transforms={},this._dirty=!0,this._cached=null,this._nestedProperties=[],this._ttl={age:null,ttlInterval:null,daemon:null},this._maxId=0,this._dynamicViews=[],this._changes=[],this._stages={},this._commitLog=[],t&&!0===t.disableMeta){if(!1===t.disableChangesApi)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(!1===t.disableDeltaChangesApi)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if("number"==typeof t.ttl&&t.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}if(this.name=e,this._unindexedSortComparator=t.unindexedSortComparator||"js",this._defaultLokiOperatorPackage=t.defaultLokiOperatorPackage||"js",void 0!==t.unique&&(Array.isArray(t.unique)||(t.unique=[t.unique]),t.unique.forEach((e=>{this._constraints.unique[e]=new n(e)}))),void 0!==g.a.FullTextSearch?this._fullTextSearch=void 0!==t.fullTextSearch?new g.a.FullTextSearch(t.fullTextSearch):null:this._fullTextSearch=null,this._transactional=void 0!==t.transactional&&t.transactional,this._cloneObjects=void 0!==t.clone&&t.clone,this._asyncListeners=void 0!==t.asyncListeners&&t.asyncListeners,this._disableMeta=void 0!==t.disableMeta&&t.disableMeta,this._disableChangesApi=void 0===t.disableChangesApi||t.disableChangesApi,this._disableDeltaChangesApi=void 0===t.disableDeltaChangesApi||t.disableDeltaChangesApi,this._cloneMethod=void 0!==t.cloneMethod?t.cloneMethod:"deep",this._disableChangesApi&&(this._disableDeltaChangesApi=!0),this._serializableIndexes=void 0===t.serializableIndexes||t.serializableIndexes,null!=t.nestedProperties)for(let e=0;e<t.nestedProperties.length;e++){const i=t.nestedProperties[e];"string"==typeof i?this._nestedProperties.push({name:i,path:i.split(".")}):this._nestedProperties.push(i)}this.setTTL(t.ttl||-1,t.ttlInterval),this._events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this._ensureId();let i=t.rangedIndexes||{};for(let e in i)this.ensureRangedIndex(e,i[e].indexTypeName,i[e].comparatorName);this.setChangesApi(this._disableChangesApi,this._disableDeltaChangesApi),this.flushChanges()}toJSON(){return{name:this.name,unindexedSortComparator:this._unindexedSortComparator,defaultLokiOperatorPackage:this._defaultLokiOperatorPackage,_dynamicViews:this._dynamicViews,uniqueNames:Object.keys(this._constraints.unique),transforms:this._transforms,rangedIndexes:this._rangedIndexes,_data:this._data,idIndex:this._idIndex,maxId:this._maxId,_dirty:this._dirty,_nestedProperties:this._nestedProperties,transactional:this._transactional,asyncListeners:this._asyncListeners,disableMeta:this._disableMeta,disableChangesApi:this._disableChangesApi,disableDeltaChangesApi:this._disableDeltaChangesApi,cloneObjects:this._cloneObjects,cloneMethod:this._cloneMethod,changes:this._changes,_fullTextSearch:this._fullTextSearch}}static fromJSONObject(e,t){let i=new v(e.name,{disableChangesApi:e.disableChangesApi,disableDeltaChangesApi:e.disableDeltaChangesApi,unindexedSortComparator:e.unindexedSortComparator,defaultLokiOperatorPackage:e.defaultLokiOperatorPackage});if(i._transactional=e.transactional,i._asyncListeners=e.asyncListeners,i._disableMeta=e.disableMeta,i._disableChangesApi=e.disableChangesApi,i._cloneObjects=e.cloneObjects,i._cloneMethod=e.cloneMethod||"deep",i._changes=e.changes,i._nestedProperties=e._nestedProperties,i._rangedIndexes=e.rangedIndexes||{},i._dirty=!(!t||!0!==t.retainDirtyFlags)&&e._dirty,t&&void 0!==t[e.name]){let s=function(e){const i=t[e.name];if(i.proto){const e=i.inflate||((e,t)=>{for(let i in e)t[i]=e[i]});return t=>{const s=new i.proto;return e(t,s),s}}return i.inflate}(e);for(let t=0;t<e._data.length;t++)i._data[t]=i._defineNestedProperties(s(e._data[t])),i._lokimap[i._data[t].$loki]=i._data[t]}else for(let t=0;t<e._data.length;t++)i._data[t]=i._defineNestedProperties(e._data[t]),i._lokimap[i._data[t].$loki]=i._data[t];i._maxId=void 0===e.maxId?0:e.maxId,i._idIndex=e.idIndex,void 0!==e.transforms&&(i._transforms=e.transforms);for(let t in e.rangedIndexes){let s=e.rangedIndexes[t],n=(0,p.a[s.indexTypeName])(t,d.a[s.comparatorName]);n.restore(s.index),i._rangedIndexes[t].index=n}if(i._ensureId(),void 0!==e.uniqueNames)for(let t=0;t<e.uniqueNames.length;t++)i.ensureUniqueIndex(e.uniqueNames[t]);if(void 0!==e._dynamicViews)for(let t=0;t<e._dynamicViews.length;t++)i._dynamicViews.push(_.fromJSONObject(i,e._dynamicViews[t]));return e._fullTextSearch&&(i._fullTextSearch=g.a.FullTextSearch.fromJSONObject(e._fullTextSearch,t.fullTextSearch)),i}addTransform(e,t){if(void 0!==this._transforms[e])throw new Error("a transform by that name already exists");this._transforms[e]=t}getTransform(e){return this._transforms[e]}setTransform(e,t){this._transforms[e]=t}removeTransform(e){delete this._transforms[e]}setTTL(e,t){e<0?clearInterval(this._ttl.daemon):(this._ttl.age=e,this._ttl.ttlInterval=t,this._ttl.daemon=setInterval((()=>{const e=Date.now();this.chain().where((t=>{const i=t.meta.updated||t.meta.created,s=e-i;return this._ttl.age<s})).remove()}),t))}_prepareFullDocIndex(){const e=new Array(this._data.length);for(let t=0;t<e.length;t++)e[t]=t;return e}ensureIndex(e,t,i){this.ensureRangedIndex(e,t,i)}ensureRangedIndex(e,t,i){if(t=t||"avl",i=i||"loki",!p.a[t])throw new Error("ensureRangedIndex: Unknown range index type");if(!d.a[i])throw new Error("ensureRangedIndex: Unknown comparator");let s=p.a[t],n=d.a[i];this._rangedIndexes[e]={index:s(e,n),indexTypeName:t,comparatorName:i};let r=this._rangedIndexes[e].index;for(let t=0;t<this._data.length;t++)r.insert(this._data[t].$loki,this._data[t][e])}ensureUniqueIndex(e){let t=new n(e);this._constraints.unique[e]=t;for(let i=0;i<this._data.length;i++)t.set(this._data[i].$loki,this._data[i][e]);return t}count(e){return e?this.chain().find(e)._filteredRows.length:this._data.length}_ensureId(){this._idIndex=[];for(let e=0;e<this._data.length;e++)this._idIndex.push(this._data[e].$loki)}addDynamicView(e,t){const i=new _(this,e,t);return this._dynamicViews.push(i),i}removeDynamicView(e){for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t].name===e&&this._dynamicViews.splice(t,1)}getDynamicView(e){for(let t=0;t<this._dynamicViews.length;t++)if(this._dynamicViews[t].name===e)return this._dynamicViews[t];return null}findAndUpdate(e,t){this.chain().find(e).update(t)}findAndRemove(e){this.chain().find(e).remove()}insert(e){if(!Array.isArray(e))return this.insertOne(e);let t,i=[];this.emit("pre-insert",e);for(let s=0;s<e.length;s++){if(t=this.insertOne(e[s],!0),!t)return;i.push(t)}return this.emit("insert",i),i=this._cloneObjects?l(i,this._cloneMethod):i,1===i.length?i[0]:i}insertOne(e,t=!1){let i,s=null;if("object"!=typeof e?s=new TypeError("Document needs to be an object"):null===e&&(s=new TypeError("Object cannot be null")),null!==s)throw this.emit("error",s),s;const n=this._defineNestedProperties(this._cloneObjects?l(e,this._cloneMethod):e);if(this._disableMeta||void 0!==n.meta||(n.meta={version:0,revision:0,created:0}),t||this.emit("pre-insert",n),this._add(n))return this._disableChangesApi?this._insertMeta(n):this._insertMetaWithChange(n),i=this._cloneObjects?l(n,this._cloneMethod):n,t||this.emit("insert",i),i}_defineNestedProperties(e){for(let t=0;t<this._nestedProperties.length;t++){const i=this._nestedProperties[t].name,s=this._nestedProperties[t].path;Object.defineProperty(e,i,{get(){const e=[];return m(this,s,e)?e:e[0]},set(e){s.slice(0,s.length-1).reduce(((e,t)=>e&&e[t]?e[t]:null),this)[s[s.length-1]]=e},enumerable:!1,configurable:!0})}return e}clear({removeIndices:e=!1}={}){if(this._data=[],this._idIndex=[],this._cached=null,this._maxId=0,this._dynamicViews=[],this._dirty=!0,!0===e)this._rangedIndexes={},this._constraints={unique:{}};else{for(let e in this._rangedIndexes)this.ensureRangedIndex(e,this._rangedIndexes[e].indexTypeName,this._rangedIndexes[e].comparatorName);const e=Object.keys(this._constraints.unique);for(let t=0;t<e.length;t++)this._constraints.unique[e[t]].clear()}null!==this._fullTextSearch&&this._fullTextSearch.clear()}update(e){if(Array.isArray(e))for(let t=0;t<e.length;t++)this.update(e[t]);else{if(void 0===e.$loki)throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();const t=this.get(e.$loki,!0);if(!t)throw new Error("Trying to update a document not in collection.");let i=t[0],s=t[1],n=this._defineNestedProperties(this._cloneObjects||!this._disableDeltaChangesApi?l(e,this._cloneMethod):e);this.emit("pre-update",e),Object.keys(this._constraints.unique).forEach((e=>{this._constraints.unique[e].update(n.$loki,n[e])})),this._data[s]=n,this._lokimap[e.$loki]=n;for(let e=0;e<this._dynamicViews.length;e++)this._dynamicViews[e]._evaluateDocument(s,!1);for(let t in this._rangedIndexes)this._rangedIndexes[t].index.update(e.$loki,e[t]);this._idIndex[s]=n.$loki,null!==this._fullTextSearch&&this._fullTextSearch.updateDocument(e,s),this.commit(),this._dirty=!0,this._disableChangesApi?this._updateMeta(n):this._updateMetaWithChange(n,i);let r=n;this._cloneObjects&&(r=l(n,this._cloneMethod)),this.emit("update",r,i)}catch(e){throw this.rollback(),this.emit("error",e),e}}}_add(e){if("object"!=typeof e)throw new TypeError("Object being added needs to be an object");if(void 0!==e.$loki)throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this._maxId++,isNaN(this._maxId)&&(this._maxId=this._data[this._data.length-1].$loki+1);const t=e;t.$loki=this._maxId,this._disableMeta||(t.meta.version=0);const i=this._constraints.unique;for(const e in i)void 0!==i[e]&&i[e].set(t.$loki,t[e]);this._idIndex.push(t.$loki),this._lokimap[t.$loki]=t,this._data.push(t);const s=this._data.length-1,n=this._dynamicViews.length;for(let e=0;e<n;e++)this._dynamicViews[e]._evaluateDocument(s,!0);for(let i in this._rangedIndexes)this._serializableIndexes&&t[i]instanceof Date&&(t[i]=t[i].getTime()),this._rangedIndexes[i].index.insert(e.$loki,e[i]);return null!==this._fullTextSearch&&this._fullTextSearch.addDocument(t,s),this.commit(),this._dirty=!0,this._cloneObjects?l(t,this._cloneMethod):t}catch(e){throw this.rollback(),this.emit("error",e),e}}updateWhere(e,t){const i=this.where(e);try{for(let e=0;e<i.length;e++)this.update(t(i[e]))}catch(e){throw this.rollback(),e}}removeWhere(e){this.remove(this._data.filter(e))}removeDataOnly(){this.remove(this._data.slice())}remove(e){if("number"==typeof e&&(e=this.get(e)),Array.isArray(e)){let t=0;const i=e.length;for(;t<i;t++)this.remove(e[t])}else{if(void 0===e.$loki)throw new Error("Object is not a document stored in the collection");try{this.startTransaction();const t=this.get(e.$loki,!0),i=t[1];let s="number"==typeof e?this.get(e):e;Object.keys(this._constraints.unique).forEach((e=>{e in s&&this._constraints.unique[e].remove(s.$loki)}));for(let e=0;e<this._dynamicViews.length;e++)this._dynamicViews[e]._removeDocument(i);this._data.splice(i,1),this._idIndex.splice(i,1),delete this._lokimap[e.$loki];for(let t in this._rangedIndexes)this._rangedIndexes[t].index.remove(e.$loki);null!==this._fullTextSearch&&this._fullTextSearch.removeDocument(e,i),this.commit(),this._dirty=!0,this._disableChangesApi||this._createChange(this.name,"R",t[0]),this.emit("delete",t[0]),delete e.$loki,delete e.meta}catch(e){throw this.rollback(),this.emit("error",e),e}}}getChanges(){return this._changes}setChangesApi(e,t=!0){this._disableChangesApi=e,this._disableDeltaChangesApi=!!e||t}flushChanges(){this._changes=[]}_getObjectDelta(e,t){const i=null!==t&&"object"==typeof t?Object.keys(t):null;if(i&&i.length&&["string","boolean","number"].indexOf(typeof t)<0){const s={};for(let n=0;n<i.length;n++){const r=i[n];if(t.hasOwnProperty(r))if(e.hasOwnProperty(r)&&void 0===this._constraints.unique[r]&&"$loki"!==r&&"meta"!==r){const i=this._getObjectDelta(e[r],t[r]);void 0!==i&&i!=={}&&(s[r]=i)}else s[r]=t[r]}return 0===Object.keys(s).length?void 0:s}return e===t?void 0:t}_getChangeDelta(e,t){return t?this._getObjectDelta(t,e):JSON.parse(JSON.stringify(e))}_createChange(e,t,i,s){this._changes.push({name:e,operation:t,obj:"U"!==t||this._disableDeltaChangesApi?JSON.parse(JSON.stringify(i)):this._getChangeDelta(i,s)})}_createInsertChange(e){this._createChange(this.name,"I",e)}_createUpdateChange(e,t){this._createChange(this.name,"U",e,t)}_insertMetaWithChange(e){this._insertMeta(e),this._createInsertChange(e)}_updateMetaWithChange(e,t){this._updateMeta(e),this._createUpdateChange(e,t)}_insertMeta(e){this._disableMeta||(e.meta||(e.meta={version:0,revision:0,created:0}),e.meta.created=(new Date).getTime(),e.meta.revision=0)}_updateMeta(e){this._disableMeta||(e.meta.updated=(new Date).getTime(),e.meta.revision+=1)}get(e,t=!1){if(!t){let t=this._lokimap[e];return void 0===t?null:t}const i=this._idIndex;let s=i.length-1,n=0,r=n+s>>1;if(e="number"==typeof e?e:parseInt(e,10),isNaN(e))throw new TypeError("Passed id is not an integer");for(;i[n]<i[s];)r=n+s>>1,i[r]<e?n=r+1:s=r;return s===n&&i[n]===e?t?[this._data[n],n]:this._data[n]:null}by(e,t){let i=this._constraints.unique[e].get(t);return this._cloneObjects?l(this._lokimap[i],this._cloneMethod):this._lokimap[i]}findOne(e){e=e||{};const t=this.chain().find(e,!0).data();return Array.isArray(t)&&0===t.length?null:this._cloneObjects?l(t[0],this._cloneMethod):t[0]}chain(e,t){const i=new f(this);return void 0===e?i:i.transform(e,t)}find(e){return this.chain().find(e).data()}findOneUnindexed(e,t){let i,s=this._data.length;for(;s--;)if(this._data[s][e]===t)return i=this._data[s],i;return null}startTransaction(){if(this._transactional){let e={};for(let t in this._rangedIndexes)e[t].indexTypeName=this._rangedIndexes[t].indexTypeName,e[t].comparatorName=this._rangedIndexes[t].comparatorName,e[t].index=this._rangedIndexes[t].index.backup();this._cached={index:this._idIndex,data:l(this._data,this._cloneMethod),rangedIndexes:e};for(let e=0;e<this._dynamicViews.length;e++)this._dynamicViews[e].startTransaction()}}commit(){if(this._transactional){this._cached=null;for(let e=0;e<this._dynamicViews.length;e++)this._dynamicViews[e].commit()}}rollback(){if(this._transactional&&null!==this._cached){this._idIndex=this._cached.index,this._data=this._cached.data;for(let e=0;e<this._data.length;e++)this._data[e]=this._defineNestedProperties(this._data[e]);for(let e in this._cached.rangedIndexes){let t=this._cached.rangedIndexes[e],i=(0,p.a[t.indexTypeName])(e,d.a[t.comparatorName]);i.restore(t.index),this._rangedIndexes[e].index=i}for(let e=0;e<this._dynamicViews.length;e++)this._dynamicViews[e].rollback()}}where(e){return this.chain().where(e).data()}mapReduce(e,t){return t(this._data.map(e))}eqJoin(e,t,i,s,n){return new f(this).eqJoin(e,t,i,s,n)}getStage(e){return this._stages[e]||(this._stages[e]={}),this._stages[e]}stage(e,t){const i=JSON.parse(JSON.stringify(t));return this.getStage(e)[t.$loki]=i,i}commitStage(e,t){const i=this.getStage(e),s=(new Date).getTime();for(const e in i)this.update(i[e]),this._commitLog.push({timestamp:s,message:t,data:JSON.parse(JSON.stringify(i[e]))});this._stages[e]={}}extract(e){const t=[];for(let i=0;i<this._data.length;i++)t.push(this._data[i][e]);return t}min(e){return Math.min.apply(null,this.extractNumerical(e))}max(e){return Math.max.apply(null,this.extractNumerical(e))}minRecord(e){const t={index:0,value:0};if(0===this._data.length)return t.index=null,t.value=null,t;t.index=this._data[0].$loki,t.value=parseFloat(this._data[0][e]);for(let i=1;i<this._data.length;i++){const s=parseFloat(this._data[i][e]);t.value>s&&(t.value=s,t.index=this._data[i].$loki)}return t}maxRecord(e){const t={index:0,value:0};if(0===this._data.length)return t.index=null,t.value=null,t;t.index=this._data[0].$loki,t.value=parseFloat(this._data[0][e]);for(let i=1;i<this._data.length;i++){const s=parseFloat(this._data[i][e]);t.value<s&&(t.value=s,t.index=this._data[i].$loki)}return t}extractNumerical(e){return this.extract(e).map(parseFloat).filter(Number).filter((e=>!isNaN(e)))}avg(e){return w(this.extractNumerical(e))}stdDev(e){return function(e){const t=w(e),i=w(e.map((e=>{const i=e-t;return i*i})));return Math.sqrt(i)}(this.extractNumerical(e))}mode(e){const t={},i=this.extractNumerical(e);let s=i[0],n=-1/0;for(let e=0;e<i.length;e++){const r=i[e];t[r]?t[r]++:t[r]=1,t[r]>n&&(s=r,n=t[r])}return s}median(e){const t=this.extractNumerical(e);t.sort(((e,t)=>e-t));const i=Math.floor(t.length/2);return t.length%2?t[i]:(t[i-1]+t[i])/2}}},function(e,t,i){"use strict";class s{constructor(e,t){this.nodes={},this.apex=null,this.name=e,this.comparator=t}backup(){let e=new s(this.name,this.comparator);return e.nodes=JSON.parse(JSON.stringify(this.nodes)),e.apex=this.apex,e}restore(e){this.name=e.name,this.comparator=e.comparator,this.nodes=JSON.parse(JSON.stringify(e.nodes)),this.apex=e.apex}insert(e,t){if(e<=0)throw new Error("avl index ids are required to be numbers greater than zero");let i=this.nodes[e]={id:e,value:t,parent:null,balance:0,height:0,left:null,right:null,siblings:[]};this.apex?this.insertNode(this.nodes[this.apex],i):this.apex=e}insertNode(e,t){switch(this.comparator(t.value,e.value)){case 0:e.siblings.push(t.id),t.parent=e.id;break;case 1:e.right?(this.insertNode(this.nodes[e.right],t),this.updateBalance(e)):(e.right=t.id,t.parent=e.id,this.updateBalance(e));break;case-1:e.left?(this.insertNode(this.nodes[e.left],t),this.updateBalance(e)):(e.left=t.id,t.parent=e.id,this.updateBalance(e));break;default:throw new Error("Invalid comparator result")}if(e.balance<-1){if(null===e.left)throw new Error("insertNode.balance() : left child should not be null");this.nodes[e.left].balance<=0?this.leftLeftCase(e):this.leftRightCase(e)}if(e.balance>1){if(null===e.right)throw new Error("insertNode.balance() : right child should not be null");this.nodes[e.right].balance>=0?this.rightRightCase(e):this.rightLeftCase(e)}return e.height}updateBalance(e){let t=e.left?this.nodes[e.left].height:-1,i=e.right?this.nodes[e.right].height:-1;e.height=t>i?1+t:1+i,e.balance=i-t}leftLeftCase(e){return this.rotateRight(e)}leftRightCase(e){if(!e.left)throw new Error("leftRightCase: left child not set");return e.left=this.rotateLeft(this.nodes[e.left]).id,this.rotateRight(e)}rightRightCase(e){return this.rotateLeft(e)}rightLeftCase(e){if(!e.right)throw new Error("rightLeftCase: right child not set");return e.right=this.rotateRight(this.nodes[e.right]).id,this.rotateLeft(e)}rotateLeft(e){if(!e.right)throw new Error("rotateLeft: right child was unavailable.");let t=e.parent?this.nodes[e.parent]:null,i=this.nodes[e.right];if(e.right=i.left,e.right&&(this.nodes[e.right].parent=e.id),i.left=e.id,i.parent=e.parent,e.parent=i.id,t)if(t.left===e.id)t.left=i.id;else{if(t.right!==e.id)throw new Error("rotateLeft() : attempt to remap parent back to child failed... not found");t.right=i.id}else{if(this.apex!==e.id)throw new Error("rightRotate expecting parentless node to be apex");this.apex=i.id}return this.updateBalance(e),this.updateBalance(i),i}rotateRight(e){if(!e.left)throw new Error("rotateRight : left child unavailable");let t=e.parent?this.nodes[e.parent]:null,i=this.nodes[e.left];if(e.left=i.right,i.right&&(this.nodes[i.right].parent=e.id),i.right=e.id,i.parent=e.parent,e.parent=i.id,t)t.left===e.id?t.left=i.id:t.right=i.id;else{if(this.apex!==e.id)throw new Error("rightRotate expecting parentless node to be apex");this.apex=i.id}return this.updateBalance(e),this.updateBalance(i),i}getValuesAsTree(e){return null===this.apex?null:{id:(e=e||this.nodes[this.apex]).id,val:e.value,siblings:e.siblings,balance:e.balance,height:e.height,left:e.left?this.getValuesAsTree(this.nodes[e.left]):null,right:e.right?this.getValuesAsTree(this.nodes[e.right]):null}}update(e,t){let i=this.nodes[e];0!==this.comparator(i.value,t)&&(this.remove(e),this.insert(e,t))}remove(e){if(!this.apex)throw new Error("remove() : attempting remove when tree has no apex");this.removeNode(this.nodes[this.apex],e)}removeNode(e,t){if(!this.nodes[t])throw new Error("removeNode: attempting to remove a node which is not in hashmap");let i=this.nodes[t].value;switch(this.comparator(i,e.value)){case 0:if(e.siblings.length>0){if(e.id===t){let i=e.siblings.shift(),s=this.nodes[i];s.parent=e.parent,this.updateChildLink(e.parent,t,i),e.left&&(this.nodes[e.left].parent=i),e.right&&(this.nodes[e.right].parent=i),s.left=e.left,s.right=e.right,s.siblings=e.siblings,s.height=e.height,s.balance=e.balance,this.apex===t&&(this.apex=i);for(let e of s.siblings)this.nodes[e].parent=i;return void delete this.nodes[t]}{let i=e.siblings.indexOf(t);if(-1===i)throw new Error("Unable to remove sibling from parented sibling");return e.siblings.splice(i,1),void delete this.nodes[t]}}return e.left||e.right?e.left&&e.right?void this.promoteSuccessor(e):(e.left&&(this.promoteChild(e,this.nodes[e.left]),this.apex===t&&(this.apex=e.left)),void(e.right&&(this.promoteChild(e,this.nodes[e.right]),this.apex===t&&(this.apex=e.right)))):(this.updateChildLink(e.parent,e.id,null),delete this.nodes[t],void(t===this.apex&&(this.apex=null)));case 1:if(!e.right)throw new Error("removeNode: Unable to find value in tree");this.removeNode(this.nodes[e.right],t);break;case-1:if(!e.left)throw new Error("removeNode: Unable to find value in tree");this.removeNode(this.nodes[e.left],t)}if(this.updateBalance(e),e.balance<-1){if(null===e.left)throw new Error("insertNode.balance() : left child should not be null");this.nodes[e.left].balance<=0?this.leftLeftCase(e):this.leftRightCase(e)}if(e.balance>1){if(null===e.right)throw new Error("insertNode.balance() : right child should not be null");this.nodes[e.right].balance>=0?this.rightRightCase(e):this.rightLeftCase(e)}}updateChildLink(e,t,i){if(null===e)return;let s=this.nodes[e];s.left===t?s.left=i:s.right===t&&(s.right=i)}promoteChild(e,t){let i=e.parent;if(i){let s=this.nodes[i];s.left===e.id?s.left=t.id:s.right===e.id&&(s.right=t.id)}t.parent=i,delete this.nodes[e.id]}promoteSuccessor(e){let t=e.id;if(!e.right||!e.left)throw new Error("promoteSuccessor() : node to replace does not have two children");let i,s,n,r=null;if(e.balance<0){let t=this.nodes[e.left];r=this.findGreaterLeaf(t),i=r.id,s=r.value,n=r.siblings,r.siblings=[],this.removeNode(t,i)}else{let t=this.nodes[e.right];r=this.findLesserLeaf(t),i=r.id,s=r.value,n=r.siblings,r.siblings=[],this.removeNode(t,i)}if(e.parent){let s=this.nodes[e.parent];s.left===t&&(s.left=i),s.right===t&&(s.right=i)}e.left&&(this.nodes[e.left].parent=i),e.right&&(this.nodes[e.right].parent=i),e.id=i,e.value=s,e.siblings=n,this.nodes[i]=e,delete this.nodes[t],this.apex===t&&(this.apex=i),this.updateBalance(e)}findGreaterLeaf(e){if(!e.right)return e;let t=this.findGreaterLeaf(this.nodes[e.right]);return t||e}findLesserLeaf(e){if(!e.left)return e;let t=this.findLesserLeaf(this.nodes[e.left]);return t||e}rangeRequest(e){if(!this.apex)return[];if(!e)return this.collateIds(this.nodes[this.apex]);if("$eq"===e.op){let t=this.locate(this.nodes[this.apex],e.val);return null===t?[]:t.siblings.length?[t.id,...t.siblings]:[t.id]}return this.collateRequest(this.nodes[this.apex],e)}collateRequest(e,t){let i=[];if("$eq"===t.op)throw new Error("collateRequest does not support $eq range request");let s=this.comparator(e.value,t.val),n=0;if("$between"===t.op){if(null===t.high||void 0===t.high)throw new Error("collateRequest: $between request missing high range value");n=this.comparator(e.value,t.high)}if(e.left)switch(t.op){case"$lt":case"$lte":i=this.collateRequest(this.nodes[e.left],t);break;case"$gt":case"$gte":case"$between":1===s&&(i=this.collateRequest(this.nodes[e.left],t))}if(t)switch(t.op){case"$lt":-1===s&&(i.push(e.id),i.push(...e.siblings));break;case"$lte":-1!==s&&0!==s||(i.push(e.id),i.push(...e.siblings));break;case"$gt":1===s&&(i.push(e.id),i.push(...e.siblings));break;case"$gte":1!==s&&0!==s||(i.push(e.id),i.push(...e.siblings));break;case"$between":s>=0&&n<=0&&(i.push(e.id),i.push(...e.siblings))}else i.push(e.id),i.push(...e.siblings);if(e.right)if(t)switch(t.op){case"$lt":case"$lte":-1===s&&i.push(...this.collateRequest(this.nodes[e.right],t));break;case"$gt":case"$gte":i.push(...this.collateRequest(this.nodes[e.right],t));break;case"$between":-1===n&&i.push(...this.collateRequest(this.nodes[e.right],t))}else i.push(...this.collateRequest(this.nodes[e.right],t));return i}collateIds(e){let t=[];return e?(e.left&&(t=this.collateIds(this.nodes[e.left])),t.push(e.id),t.push(...e.siblings),e.right&&t.push(...this.collateIds(this.nodes[e.right])),t):[]}locate(e,t){for(;null!==e;)switch(this.comparator(t,e.value)){case 0:return e;case 1:if(!e.right)return null;e=this.nodes[e.right];break;case-1:if(!e.left)return null;e=this.nodes[e.left]}return null}validateIndex(){if(!this.apex)return 0===Object.keys(this.nodes).length;if(null!==this.nodes[this.apex].parent)return!1;let e=this.collateIds(this.nodes[this.apex]),t=Object.keys(this.nodes).length;if(e.length!==t)return!1;if(1===e.length)return null===this.nodes[e[0]].parent&&null===this.nodes[e[0]].left&&null===this.nodes[e[0]].right;for(let t=0;t<e.length-1;t++)if(1===this.comparator(this.nodes[e[t]].value,this.nodes[e[t+1]].value))return!1;return this.validateNode(this.nodes[this.apex])}validateNode(e){if(-1!==[e.parent,e.left,e.right].indexOf(e.id))return!1;let t=e.left?this.nodes[e.left].height:-1,i=e.right?this.nodes[e.right].height:-1,s=1+Math.max(t,i);if(e.height!==s)return!1;if(e.balance!==i-t)return!1;if(e.siblings.length>0)for(let t of e.siblings)if(this.nodes[t].parent!==e.id)return!1;if(e.left){if(this.nodes[e.left].parent!==e.id)return!1;if(!this.validateNode(this.nodes[e.left]))return!1}if(e.right){if(this.nodes[e.right].parent!==e.id)return!1;if(!this.validateNode(this.nodes[e.right]))return!1}return!0}}i.d(t,"a",(function(){return n}));let n={avl:(e,t)=>new s(e,t)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(){this._events={},this._asyncListeners=!1}on(e,t){let i;return Array.isArray(e)?(e.forEach((e=>{this.on(e,t)})),t):(i=this._events[e],i||(i=this._events[e]=[]),i.push(t),t)}emit(e,...t){e&&this._events[e]&&this._events[e].forEach((e=>{this._asyncListeners?setTimeout((()=>{e(...t)}),1):e(...t)}))}addListener(e,t){return this.on(e,t)}removeListener(e,t){if(Array.isArray(e)&&e.forEach((e=>{this.removeListener(e,t)})),this._events[e]){const i=this._events[e];i.splice(i.indexOf(t),1)}}}},function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return d}));var s=i(5),n=i(3),r=i(1),o=i(0),a=i(4),l=i(2);function h(){if(void 0!==e&&(e.android||e.NSObject))return"NATIVESCRIPT";if(void 0!==e&&"[object process]"==={}.toString.call(e.process))return e.window,"NODEJS";if(void 0!==document)return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER";if(void 0!==window&&"[object Window]"==={}.toString.call(window))return"BROWSER";throw SyntaxError("Unknown environment...")}class d extends s.a{constructor(e="loki.db",t={}){if(super(),this.databaseVersion=1.5,this.engineVersion=1.5,this._persistenceMethod=null,this._persistenceAdapter=null,this._throttledSaves=!0,this._throttledSaveRunning=null,this._throttledSavePending=null,this._autosave=!1,this._autosaveInterval=5e3,this._autosaveRunning=!1,this._autosaveHandler=Promise.resolve(),this.filename=e,this._collections=[],({serializationMethod:this._serializationMethod="normal",destructureDelimiter:this._destructureDelimiter="$<\n",env:this._env=h()}=t),this._events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]},t.comparatorMap)for(let e in t.comparatorMap)o.a[e]=t.comparatorMap[e];if(t.rangedIndexFactoryMap)for(let e in t.rangedIndexFactoryMap)a.a[e]=t.rangedIndexFactoryMap[e];if(t.lokiOperatorPackageMap)for(let e in t.lokiOperatorPackageMap)l.a[e]=t.lokiOperatorPackageMap[e];this.on("init",this.clearChanges)}initializePersistence(e={}){let t=this._autosaveDisable();({autosave:this._autosave=!1,autosaveInterval:this._autosaveInterval=5e3,persistenceMethod:this._persistenceMethod,throttledSaves:this._throttledSaves=!0}=e);const i={NODEJS:["fs-storage"],BROWSER:["local-storage","indexed-storage"],CORDOVA:["local-storage","indexed-storage"],MEMORY:["memory-storage"]},s={"fs-storage":r.a.FSStorage,"local-storage":r.a.LocalStorage,"indexed-storage":r.a.IndexedStorage,"memory-storage":r.a.MemoryStorage};if(void 0!==this._persistenceMethod){if("function"!=typeof s[this._persistenceMethod])throw Error("Unknown persistence method.");this._persistenceAdapter=new s[this._persistenceMethod]}if(void 0!==e.adapter&&(this._persistenceMethod="adapter",this._persistenceAdapter=e.adapter),null===this._persistenceAdapter){let e=i[this._env];if(e)for(let t=0;t<e.length;t++)if(s[e[t]]){this._persistenceMethod=e[t],this._persistenceAdapter=new s[e[t]];break}}return e.autoload&&(t=t.then((()=>this._loadDatabase(e.inflate,!0)))),t.then((()=>{this._autosaveEnable()}))}copy(e={}){const t=new d(this.filename,{env:this._env});if(t.loadJSONObject(this,{retainDirtyFlags:!0}),e.removeNonSerializable){t._persistenceAdapter=null;for(let e=0;e<t._collections.length;e++)t._collections[e]._constraints=null,t._collections[e]._ttl=null}return t}addCollection(e,t={}){for(let t=0;t<this._collections.length;t++)if(this._collections[t].name===e)return this._collections[t];const i=new n.a(e,t);return this._collections.push(i),i}loadCollection(e){if(!e.name)throw new Error("Collection must have a name property to be loaded");this._collections.push(e)}getCollection(e){for(let t=0;t<this._collections.length;t++)if(this._collections[t].name===e)return this._collections[t];return this.emit("warning","collection "+e+" not found"),null}renameCollection(e,t){const i=this.getCollection(e);return i&&(i.name=t),i}listCollections(){const e=[];for(let t=0;t<this._collections.length;t++)e.push({name:this._collections[t].name,count:this._collections[t].count()});return e}removeCollection(e){for(let t=0;t<this._collections.length;t++)if(this._collections[t].name===e){const i=new n.a(e,{}),s=this._collections[t];for(const e in s)void 0!==s[e]&&void 0!==i[e]&&(s[e]=i[e]);return void this._collections.splice(t,1)}}serialize(e={}){switch(void 0===e.serializationMethod&&(e.serializationMethod=this._serializationMethod),e.serializationMethod){case"normal":default:return JSON.stringify(this);case"pretty":return JSON.stringify(this,null,2);case"destructured":return this.serializeDestructured()}}toJSON(){return{_env:this._env,_serializationMethod:this._serializationMethod,_autosave:this._autosave,_autosaveInterval:this._autosaveInterval,_collections:this._collections,databaseVersion:this.databaseVersion,engineVersion:this.engineVersion,filename:this.filename,_persistenceAdapter:this._persistenceAdapter,_persistenceMethod:this._persistenceMethod,_throttledSaves:this._throttledSaves}}serializeDestructured(e={}){if(void 0===e.partitioned&&(e.partitioned=!1),void 0===e.delimited&&(e.delimited=!0),void 0===e.delimiter&&(e.delimiter=this._destructureDelimiter),!0===e.partitioned&&void 0!==e.partition&&e.partition>=0)return this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:e.partition});let t=new d(this.filename);t.loadJSONObject(this);for(let e=0;e<t._collections.length;e++)t._collections[e]._data=[];if(!0===e.partitioned&&-1===e.partition)return t.serialize({serializationMethod:"normal"});const i=[];i.push(t.serialize({serializationMethod:"normal"})),t=null;for(let t=0;t<this._collections.length;t++){let s=this.serializeCollection({delimited:e.delimited,delimiter:e.delimiter,collectionIndex:t});if(!1===e.partitioned&&!1===e.delimited){if(!Array.isArray(s))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(let e=0;e<s.length;e++)i.push(s[e]),s[e]=null;i.push("")}else i.push(s)}return e.partitioned?(e.delimited,i):e.delimited?(i.push(""),i.join(e.delimiter)):(i.push(""),i)}serializeCollection(e={}){if(void 0===e.delimited&&(e.delimited=!0),void 0===e.collectionIndex)throw new Error("serializeCollection called without 'collectionIndex' option");const t=this._collections[e.collectionIndex].count();let i=[];for(let s=0;s<t;s++)i.push(JSON.stringify(this._collections[e.collectionIndex]._data[s]));return e.delimited?(i.push(""),i.join(e.delimiter)):i}deserializeDestructured(e,t={}){if(void 0===t.partitioned&&(t.partitioned=!1),void 0===t.delimited&&(t.delimited=!0),void 0===t.delimiter&&(t.delimiter=this._destructureDelimiter),t.partitioned){if(void 0!==t.partition)return-1===t.partition?JSON.parse(e[0]):this.deserializeCollection(e[t.partition+1],t);const i=JSON.parse(e[0]),s=i._collections.length;for(let n=0;n<s;n++)i._collections[n]._data=this.deserializeCollection(e[n+1],t);return i}let i=[];if(t.delimited){if(i=e.split(t.delimiter),e=null,0===i.length)return null}else i=e;const s=JSON.parse(i[0]),n=s._collections.length;i[0]=null;let r=0,o=1,a=!1;for(;!a;)""===i[o]?++r>n&&(a=!0):s._collections[r]._data.push(JSON.parse(i[o])),i[o++]=null;return s}deserializeCollection(e,t={}){void 0===t.partitioned&&(t.partitioned=!1),void 0===t.delimited&&(t.delimited=!0),void 0===t.delimiter&&(t.delimiter=this._destructureDelimiter);let i=[];t.delimited?(i=e.split(t.delimiter),i.pop()):i=e;for(let e=0;e<i.length;e++)i[e]=JSON.parse(i[e]);return i}loadJSON(e,t){let i;if(0===e.length)i={};else switch(this._serializationMethod){case"normal":case"pretty":default:i=JSON.parse(e);break;case"destructured":i=this.deserializeDestructured(e)}this.loadJSONObject(i,t)}loadJSONObject(e,t={}){const i=e._collections?e._collections.length:0;this.filename=e.filename,this._collections=[];for(let s=0;s<i;++s)this._collections.push(n.a.fromJSONObject(e._collections[s],t))}close(){return this._autosave?this._autosaveDisable().then((()=>this._autosaveDirty()?this.saveDatabase():Promise.resolve())):Promise.resolve().then((()=>{this.emit("close")}))}generateChangesNotification(e){let t=[];const i=e||this._collections.map((e=>e.name));return this._collections.forEach((e=>{-1!==i.indexOf(e.name)&&(t=t.concat(e.getChanges()))})),t}serializeChanges(e){return JSON.stringify(this.generateChangesNotification(e))}clearChanges(){this._collections.forEach((e=>{e.flushChanges&&e.flushChanges()}))}throttledSaveDrain(e={}){const t=(new Date).getTime();return this._throttledSaves?(void 0===e.recursiveWait&&(e.recursiveWait=!0),void 0===e.recursiveWaitLimit&&(e.recursiveWaitLimit=!1),void 0===e.recursiveWaitLimitDuration&&(e.recursiveWaitLimitDuration=2e3),void 0===e.started&&(e.started=new Date),this._throttledSaves&&null!==this._throttledSaveRunning?e.recursiveWait?Promise.resolve(Promise.all([this._throttledSaveRunning,this._throttledSavePending])).then((()=>null!==this._throttledSaveRunning||null!==this._throttledSavePending?e.recursiveWaitLimit&&t-e.started.getTime()>e.recursiveWaitLimitDuration?Promise.reject({}):this.throttledSaveDrain(e):Promise.resolve())):Promise.resolve(this._throttledSaveRunning):Promise.resolve()):Promise.resolve()}_loadDatabase(e={},t=!1){return null===this._persistenceAdapter?Promise.reject(new Error("persistenceAdapter not configured")):Promise.resolve(this._persistenceAdapter.loadDatabase(this.filename)).then((t=>{if("string"==typeof t)this.loadJSON(t,e),this.emit("load",this);else{if("object"!=typeof t||null===t||t instanceof Error)throw t;this.loadJSONObject(t,e),this.emit("load",this)}})).catch((e=>{if(e instanceof Error)throw e;if(null!=e)throw new TypeError("The persistence adapter did not load a serialized DB string or object.");if(!t)throw new Error("Database not found.")}))}loadDatabase(e={}){return this._throttledSaves?this.throttledSaveDrain(e).then((()=>(this._throttledSaveRunning=this._loadDatabase(e).then((()=>{this._throttledSaveRunning=null})),this._throttledSaveRunning)),(()=>{throw new Error("Unable to pause save throttling long enough to read database")})):this._loadDatabase(e)}_saveDatabase(){return null===this._persistenceAdapter?Promise.reject(new Error("persistenceAdapter not configured")):"reference"===this._persistenceAdapter.mode&&"function"==typeof this._persistenceAdapter.exportDatabase?Promise.resolve(this._persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}))).then((()=>{this._autosaveClearFlags(),this.emit("save")})):(this._autosaveClearFlags(),Promise.resolve(this._persistenceAdapter.saveDatabase(this.filename,this.serialize())).then((()=>{this.emit("save")})))}saveDatabase(){return this._throttledSaves?(null!==this._throttledSaveRunning&&null===this._throttledSavePending&&(this._throttledSavePending=Promise.resolve(this._throttledSaveRunning).then((()=>(this._throttledSaveRunning=null,this._throttledSavePending=null,this.saveDatabase())))),null!==this._throttledSavePending?this._throttledSavePending:(this._throttledSaveRunning=this._saveDatabase().then((()=>{this._throttledSaveRunning=null})),this._throttledSaveRunning)):this._saveDatabase()}deleteDatabase(){return null===this._persistenceAdapter?Promise.reject(new Error("persistenceAdapter not configured")):Promise.resolve(this._persistenceAdapter.deleteDatabase(this.filename))}_autosaveDirty(){for(let e=0;e<this._collections.length;e++)if(this._collections[e]._dirty)return!0;return!1}_autosaveClearFlags(){for(let e=0;e<this._collections.length;e++)this._collections[e]._dirty=!1}_autosaveEnable(){if(!this._autosave||this._autosaveRunning)return;this._autosaveRunning=!0;const e=setInterval((()=>{this._autosaveRunning?this._autosaveDirty()&&(this._autosaveHandler=this._autosaveHandler.then((()=>this.saveDatabase()))):clearInterval(e)}),this._autosaveInterval)}_autosaveDisable(){return this._autosaveRunning=!1,this._autosaveHandler}}}).call(this,i(7))},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";i.r(t);var s=i(6);i.d(t,"Loki",(function(){return s.a}));var n=i(3);i.d(t,"Collection",(function(){return n.a})),s.a.Collection=n.a,t.default=s.a}])},e.exports=s()},1052:function(e,t,i){var s;"undefined"!=typeof self&&self,s=function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";(function(e){function s(){let t;return function(e){t=e}(void 0!==e&&e||this),t}i.d(t,"a",(function(){return n}));const n=function(){const e=s(),t=Symbol.for("LOKI");return void 0===e[t]&&(e[t]={}),e[t]}()}).call(this,i(2))},function(e,t,i){"use strict";function s(e){return e.split(/[\s]+/)}function n(e){return e.toLowerCase()}function r(e){return e.toUpperCase()}function o(e,t){if(e.char_filter)for(let i=0;i<e.char_filter.length;i++)t=e.char_filter[i](t);const i=e.tokenizer(t);if(e.token_filter)for(let t=0;t<i.length;t++)for(let s=0;s<e.token_filter.length;s++)i[t]=e.token_filter[s](i[t],t,i);return i.filter((e=>e))}i.r(t);class a{constructor(){this.tokenizer=s,this.token_filter=[n]}}function l(e){const t=[];for(let i=0;i<e.length;){const s=e.charCodeAt(i++);if(s>=55296&&s<=56319){const n=e.charCodeAt(i++);t.push(65536+(s-55296<<10)|n-56320)}else t.push(s)}return t}class h{constructor(e={}){this.docCount=0,this.docStore=new Map,this.totalFieldLength=0,this.root=new Map,({store:this._store=!0,optimizeChanges:this._optimizeChanges=!0,analyzer:this.analyzer=new a}=e)}insert(e,t){if(this.docStore.has(t))throw Error("Field already added.");const i=o(this.analyzer,e);if(0==i.length)return void this.docStore.set(t,{fieldLength:0});this.totalFieldLength+=i.length,this.docCount+=1,this.docStore.set(t,{fieldLength:i.length});const s=[];this._optimizeChanges&&Object.defineProperties(this.docStore.get(t),{indexRef:{enumerable:!1,configurable:!0,writable:!0,value:s}});for(const e of new Set(i)){let n=0;for(let t=0;t<i.length;t++)i[t]===e&&++n;let r=this.root;for(const t of l(e)){let e=r.get(t);void 0===e&&(e=new Map,this._optimizeChanges&&(e.pa=r),r.set(t,e)),r=e}void 0===r.dc&&(r.dc=new Map,r.df=0),r.dc.set(t,n),r.df+=1,s.push(r)}}remove(e){if(!this.docStore.has(e))return;const t=this.docStore.get(e);if(this.docStore.delete(e),0!==t.fieldLength)if(this.docCount-=1,this.totalFieldLength-=t.fieldLength,this._optimizeChanges){const i=t.indexRef;for(let t=0;t<i.length;t++){let s=i[t];if(s.df-=1,s.dc.delete(e),0===s.df){if(delete s.df,delete s.dc,0!==s.size)continue;do{const e=s.pa;delete s.pa;for(const t of e.keys())if(e.get(t)===s){e.delete(t);break}s=e}while(void 0!==s.pa&&0===s.size&&void 0===s.df)}}}else this._remove(this.root,e)}static getTermIndex(e,t,i=0){if(i>=e.length)return null;for(let s=i;s<e.length;s++){let i=t.get(e[s]);if(void 0===i)return null;t=i}return t}static extendTermIndex(e,t=[],i=[]){void 0!==e.df&&i.push({index:e,term:t.slice()}),t.push(0);for(const s of e)t[t.length-1]=s[0],h.extendTermIndex(s[1],t,i);return t.pop(),i}toJSON(){return this._store?{_store:!0,_optimizeChanges:this._optimizeChanges,docCount:this.docCount,docStore:[...this.docStore],totalFieldLength:this.totalFieldLength,root:h._serializeIndex(this.root)}:{_store:!1,_optimizeChanges:this._optimizeChanges}}static fromJSONObject(e,t){const i=new h({store:e._store,optimizeChanges:e._optimizeChanges,analyzer:t});return e._store&&(i.docCount=e.docCount,i.docStore=new Map(e.docStore),i.totalFieldLength=e.totalFieldLength,i.root=h._deserializeIndex(e.root)),i._optimizeChanges&&i._regenerate(i.root,null),i}static _serializeIndex(e){const t={};if(void 0!==e.dc&&(t.d={df:e.df,dc:[...e.dc]}),0===e.size)return t;const i=[],s=[];for(const t of e)i.push(t[0]),s.push(h._serializeIndex(t[1]));return t.k=i,t.v=s,t}static _deserializeIndex(e){const t=new Map;if(void 0!==e.k)for(let i=0;i<e.k.length;i++)t.set(e.k[i],h._deserializeIndex(e.v[i]));return void 0!==e.d&&(t.df=e.d.df,t.dc=new Map(e.d.dc)),t}_regenerate(e,t){null!==t&&(e.pa=t);for(const t of e.values())this._regenerate(t,e);if(void 0!==e.dc)for(const t of e.dc.keys()){const i=this.docStore.get(t);void 0===i.indexRef&&Object.defineProperties(i,{indexRef:{enumerable:!1,configurable:!0,writable:!0,value:[]}}),i.indexRef.push(e)}}_remove(e,t){for(const i of e)this._remove(i[1],t)&&e.delete(i[0]);return void 0!==e.df&&e.dc.has(t)&&(e.df-=1,e.dc.delete(t),0===e.df&&(delete e.df,delete e.dc)),0===e.size&&void 0===e.dc}}class d{constructor(e){this._cache={},this._invIdxs=e}setDirty(){this._cache={}}score(e,t,i,s,n,r,o=0){if(null===i||void 0===i.dc)return;const a=this._idf(e,o||i.df);for(const[o,l]of i.dc)n.has(o)||n.set(o,[]),!0===s?n.get(o).push({tf:l,idf:a,boost:t,fieldName:e,term:r}):!1===s?n.set(o,[{boost:t}]):n.set(o,[{boost:0}])}scoreConstant(e,t,i){return i.has(t)||i.set(t,[]),i.get(t).push({boost:e}),i}finalScore(e,t){const i={},s=void 0!==e.bm25?e.bm25.k1:1.2,n=void 0!==e.bm25?e.bm25.b:.75,r=void 0!==e.explain&&e.explain;for(const[e,o]of t){let t=0,a=[];for(let i=0;i<o.length;i++){const l=o[i];let h=0;if(void 0!==l.tf){const t=l.tf,i=d._calculateFieldLength(this._invIdxs[l.fieldName].docStore.get(e).fieldLength),o=this._avgFieldLength(l.fieldName),c=t*(s+1)/(t+s*(1-n+n*(i/o)));h=l.idf*c*l.boost,r&&a.push({boost:l.boost,score:h,docID:e,fieldName:l.fieldName,index:String.fromCharCode(...l.term),idf:l.idf,tfNorm:c,tf:t,fieldLength:i,avgFieldLength:o})}else h=l.boost,r&&a.push({boost:l.boost,score:h});t+=h}i[e]=r?{score:t,explanation:a}:{score:t}}return i}static _calculateFieldLength(e){return e}_getCache(e){if(void 0===this._cache[e]){const t=this._invIdxs[e].totalFieldLength/this._invIdxs[e].docCount;this._cache[e]={idfs:{},avgFieldLength:t}}return this._cache[e]}_idf(e,t){const i=this._getCache(e);return void 0!==i.idfs[t]?i.idfs[t]:i.idfs[t]=Math.log(1+(this._invIdxs[e].docCount-t+.5)/(t+.5))}_avgFieldLength(e){return this._getCache(e).avgFieldLength}}class c{constructor(e){const t=e.getNumStates();this._points=e.getStartPoints(),this._accept=new Array(t),this._transitions=new Array(t*this._points.length);for(let i=0;i<t;i++){this._accept[i]=e.isAccept(i);for(let t=0;t<this._points.length;t++)this._transitions[i*this._points.length+t]=e.step(i,this._points[t])}this._classmap=new Array(256);for(let e=0,t=0;t<this._classmap.length;t++)e+1<this._points.length&&t===this._points[e+1]&&e++,this._classmap[t]=e}getCharClass(e){let t=0,i=this._points.length;for(;i-t>1;){const s=t+i>>>1;if(this._points[s]>e)i=s;else{if(!(this._points[s]<e))return s;t=s}}return t}step(e,t){return t>=this._classmap.length?this._transitions[e*this._points.length+this.getCharClass(t)]:this._transitions[e*this._points.length+this._classmap[t]]}isAccept(e){return this._accept[e]}}const u=1114111;function f(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:e[1]<t[1]?-1:e[1]>t[1]?1:e[2]<t[2]?-1:e[2]>t[2]?1:0}function _(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:e[2]<t[2]?-1:e[2]>t[2]?1:e[0]<t[0]?-1:e[0]>t[0]?1:0}class p{constructor(){this._stateTransitions=[],this._stateTransitions=[],this._accept=new Set,this._nextState=0,this._currState=-1,this._transitions={}}isAccept(e){return this._accept.has(e)}createState(){return this._nextState++}setAccept(e,t){t?this._accept.add(e):this._accept.delete(e)}finishState(){-1!==this._currState&&(this._finishCurrentState(),this._currState=-1)}_finishCurrentState(){this._stateTransitions.sort(f);let e=0,t=[-1,-1,-1];for(let i=0,s=this._stateTransitions.length;i<s;i++){let s=this._stateTransitions[i];t[0]===s[0]?s[1]<=t[2]+1?s[2]>t[2]&&(t[2]=s[2]):(-1!==t[0]&&(this._stateTransitions[e][0]=t[0],this._stateTransitions[e][1]=t[1],this._stateTransitions[e][2]=t[2],e++),t[1]=s[1],t[2]=s[2]):(-1!==t[0]&&(this._stateTransitions[e][0]=t[0],this._stateTransitions[e][1]=t[1],this._stateTransitions[e][2]=t[2],e++),t[0]=s[0],t[1]=s[1],t[2]=s[2])}-1!==t[0]&&(this._stateTransitions[e][0]=t[0],this._stateTransitions[e][1]=t[1],this._stateTransitions[e][2]=t[2],e++),this._transitions[this._currState]=this._stateTransitions.slice(0,e).sort(_),this._stateTransitions=[]}getStartPoints(){const e=new Set;e.add(0);const t=Object.keys(this._transitions);for(let i=0;i<t.length;i++){let s=this._transitions[t[i]];for(let t=0;t<s.length;t++){let i=s[t];e.add(i[1]),i[2]<u&&e.add(i[2]+1)}}return Array.from(e).sort(((e,t)=>e-t))}step(e,t){let i=this._transitions[e];if(i)for(let e=0;e<i.length;e++){let s=i[e];if(s[1]<=t&&t<=s[2])return s[0]}return-1}getNumStates(){return this._nextState}addTransition(e,t,i,s){this._currState!==e&&(-1!==this._currState&&this._finishCurrentState(),this._currState=e),this._stateTransitions.push([t,i,s])}}class g{constructor(e=0,t=0){this._low=e,this._high=t}shiftRight(e){return 0==(e&=63)?this:e<32?new g(this._low>>>e|this._high<<32-e,this._high>>e):new g(this._high>>e-32,this._high>=0?0:-1)}shiftLeft(e){return 0==(e&=63)?this:e<32?new g(this._low<<e,this._high<<e|this._low>>>32-e):new g(0,this._low<<e-32)}and(e){return new g(this._low&e._low,this._high&e._high)}toInt(){return this._low}}const w=[new g(1),new g(3),new g(7),new g(15),new g(31),new g(63),new g(127),new g(255),new g(511),new g(1023),new g(2047),new g(4095),new g(8191),new g(16383),new g(32767),new g(65535),new g(15,8191),new g(15,16383),new g(15,32767),new g(15,65535),new g(255,8191),new g(255,16383),new g(255,32767),new g(255,65535),new g(4095,8191),new g(4095,16383),new g(4095,32767),new g(4095,65535),new g(65535,8191),new g(65535,16383),new g(65535,32767),new g(65535,65535),new g(1048575,8191),new g(1048575,16383),new g(1048575,32767),new g(1048575,65535),new g(16777215,8191),new g(16777215,16383),new g(16777215,32767),new g(16777215,65535),new g(268435455,8191),new g(268435455,16383),new g(268435455,32767),new g(268435455,65535),new g(4294967295,8191),new g(4294967295,16383),new g(4294967295,32767),new g(4294967295,65535),new g(68719476735,8191),new g(68719476735,16383),new g(68719476735,32767),new g(68719476735,65535),new g(0xffffffffff,8191),new g(0xffffffffff,16383),new g(0xffffffffff,32767),new g(0xffffffffff,65535),new g(0xfffffffffff,8191),new g(0xfffffffffff,16383),new g(0xfffffffffff,32767),new g(0xfffffffffff,65535),new g(0xffffffffffff,8191),new g(0xffffffffffff,16383),new g(0xffffffffffff,32767)];class m{constructor(e,t,i){this._w=e,this._n=t,this._minErrors=i}size(){return this._minErrors.length*(this._w+1)}isAccept(e){let t=Math.floor(e/(this._w+1)),i=e%(this._w+1);return this._w-i+this._minErrors[t]<=this._n}getPosition(e){return e%(this._w+1)}static unpack(e,t,i){const s=i*t,n=s>>6,r=63&s;if(r+i<=64)return e[n].shiftRight(r).and(w[i-1]).toInt();{const t=64-r;return e[n].shiftRight(r).and(w[t-1]).toInt()+e[1+n].and(w[i-t-1]).shiftLeft(t).toInt()}}}const v=[new g(2)],b=[new g(0)],y=[new g(2627)],x=[new g(56)],S=[new g(2182348803,877873428),new g(109)],k=[new g(1436680192,21845)],I=[new g(2416705539,559024212),new g(1161073005,1531779490),new g(55860)],C=[new g(553385984,1431678474),new g(1431655765)];class O extends m{constructor(e){super(e,1,[0,1,0,-1,-1,-1])}transition(e,t,i){let s=Math.floor(e/(this._w+1)),n=e%(this._w+1);if(t===this._w){if(s<2){const e=2*i+s;n+=m.unpack(b,e,1),s=m.unpack(v,e,2)-1}}else if(t===this._w-1){if(s<3){const e=3*i+s;n+=m.unpack(x,e,1),s=m.unpack(y,e,2)-1}}else if(t===this._w-2){if(s<6){const e=6*i+s;n+=m.unpack(k,e,2),s=m.unpack(S,e,3)-1}}else if(s<6){const e=6*i+s;n+=m.unpack(C,e,2),s=m.unpack(I,e,3)-1}return-1===s?-1:s*(this._w+1)+n}}const R=[new g(35)],D=[new g(0)],A=[new g(325618500)],N=[new g(992)],P=[new g(1375778052,1625010352),new g(654713383,1379082614),new g(338833973,592794674),new g(17236)],z=[new g(8192,1431339176),new g(1431655765,85)],M=[new g(1074107396,3875651625),new g(10813440,2685408800),new g(2705416840,2955709504),new g(822630592,176295986),new g(220770817,826549144),new g(2222426336,1384244520),new g(146941966,2721677523),new g(2841782156,506631345),new g(579396904,2353082526),new g(35310113,289686537),new g(2259748971,295985736),new g(492978372,711088276),new g(1217426605,1344578827),new g(1376534810,344070858),new g(190401092,1485354377),new g(3289490533,2484954400),new g(2909430484,2337837173),new g(441472420)],j=[new g(8192,3195650),new g(3288085308,704655603),new g(2189600800,591003698),new g(850559912,1431655765),new g(1431655765,1431655765),new g(1431655765,1431655765),new g(1431655765,1431655765)],T=[new g(2904068,58725456),new g(3640,3305111883),new g(1363153922,1300),new g(0),new g(335609856,85458955),new g(685900336,166838792),new g(2198499522,564071920),new g(136348160,2181038210),new g(1619003392,134546689),new g(39855683,813828486),new g(1347453028,1164181826),new g(536873009,139461908),new g(2231378050,1094735904),new g(160481793,1164017816),new g(1352667217,137456908),new g(84799712,558175264),new g(340820500,219423040),new g(1350704224,1008844824),new g(3407093895,30086147),new g(407994924,2148016453),new g(545259552,2097672),new g(2266497861,3490060320),new g(613903113,3406463435),new g(1648822737,145860110),new g(2183434377,38340640),new g(13811748,3272876486),new g(356860963,1009861909),new g(3256660288,830815266),new g(740327956,1158959115),new g(1351286865,141656116),new g(1359540421,2999666001),new g(481339408,3894702429),new g(2425032288,337824532),new g(3224154437,813771810),new g(212943372,2216698370),new g(550373456,1545653768),new g(2332913858,545392672),new g(337723912,1107841154),new g(1350765600,153125696),new g(325399954,3323153862),new g(1841617741,3540595740),new g(1423134004,1680136456),new g(50861250,2449943586),new g(614664496,1109422667),new g(633938146,611374880),new g(2539425922,2462657904),new g(76697096,3406332098),new g(3259769985,1165203240),new g(3663819994,3336195509),new g(1563465501,1264399831),new g(2474794210,271614300),new g(34386245,1363419217),new g(740429356,3308790030),new g(1389038960,139543060),new g(2232701250,541788240),new g(1079067660,2450874499),new g(2785961365,1298533965),new g(476956248,2497254628),new g(341103461,2187601497),new g(1359153171,680658732),new g(3408700171,3804373106),new g(542345488,1160540375),new g(1888368785,145935149),new g(3255087694,2177569856),new g(683854372,3661947790),new g(2245419236,499571301),new g(2388496718,3804978483),new g(949191224)],$=[new g(524288,805437440),new g(2146400),new g(67108864,2169044992),new g(276973604,1076138561),new g(1610621058,3680514243),new g(807079296,1815527532),new g(897243,2954387888),new g(2441666669,460338720),new g(114847159,134255104),new g(37758096,76680228),new g(136613897,4784130),new g(672286724,1225265793),new g(306857122,880804100),new g(220463628,3272159376),new g(616713508,1073781257),new g(2449540634,77089286),new g(1898353250,1229784210),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,9362)],q=[new g(2904068,58725456),new g(3640,3305111883),new g(1363153922,1300),new g(0),new g(335609856,85196811),new g(59637984,5570560),new g(100708736,642062416),new g(136348168,2181570690),new g(1082263584,181504),new g(2156659014,1887570488),new g(2620424828,3279691970),new g(545261671,2130440),new g(33562752,2973765664),new g(5341184,2190352419),new g(547298336,137406220),new g(2235429087,1363481680),new g(340820500,370417986),new g(813715536,1613103716),new g(1124606104,621086726),new g(341196820,1107296387),new g(545587281,139461128),new g(336856450,2157513760),new g(136714249,2181140994),new g(2416314689,143787289),new g(3257709122,575218834),new g(23218476,1124599045),new g(2248302630,2151761173),new g(3316920642,935559200),new g(340819988,1107841157),new g(1350893649,21053528),new g(2550763714,1363501440),new g(206610448,3758633325),new g(1351295472,743623468),new g(3257709129,1611476114),new g(407929372,2268864960),new g(63640608,738315028),new g(1159221634,545261601),new g(136347648,1157636098),new g(545724419,141559316),new g(84419023,1946484981),new g(408981504,2471335494),new g(813845808,1277481805),new g(3321943618,25561121),new g(635093620,3265295049),new g(2445440114,745112472),new g(2300846658,2453800992),new g(883951872,2181591424),new g(2963079265,481446262),new g(2635903144,1625695344),new g(359976510,3541325271),new g(633494900,476056888),new g(1111241026,1364284500),new g(335790868,3257672139),new g(558045267,11715080),new g(85217605,54855856),new g(206604056,1427443855),new g(4060419156,141821184),new g(102297744,3797110162),new g(1704116792,1228416601),new g(566624470,1143194388),new g(3408729413,1925357634),new g(2693907828,1110194563),new g(1351298130,11715860),new g(2150936715,4039444593),new g(1162957064,2819666635),new g(1901927600,576776228),new g(2385343694,3864603731),new g(949191224,1108095105),new g(570559665,139494432),new g(3456639182,1891785760),new g(136350477,1107828866),new g(1350702113,203440648),new g(2200719491,554174592),new g(137937428,2768779394),new g(2848166960,2863311530),new g(2678717098,447381162),new g(337691400,2185765072),new g(2228833636,1904530289),new g(460404435,885148935),new g(355783501,2567517762),new g(818021680,137626888),new g(1398349970,886858038),new g(1303698529,2759444188),new g(1227133514,2450169746),new g(2173872170,1925324848),new g(814942496,119845450),new g(2450400290,225575516),new g(3372753479,2463566197),new g(618694956,2282496073),new g(3259505840,747801636),new g(2299037513,2158306440),new g(2865185684,1787173674),new g(2871505528,135998630),new g(120332803,2735288466),new g(1763036764,3614016979),new g(1998285110,1567933020),new g(2301457623,1917716851),new g(142656005,1277460939),new g(1939286210,1635048005),new g(3662525914,1252095430),new g(2252890502,1787206439),new g(813795018,212944144),new g(1142968578,571354193),new g(941690412,3406655685),new g(1363285074,340869640),new g(1258836101,1363414048),new g(339772204,3407106312),new g(1217071240,2486264328),new g(2675866051,4205477370),new g(2124930941,50862570),new g(550507601,1701086552),new g(2473165721,2517850499),new g(956767089,3647288901),new g(2521109812,81828105),new g(85213378,559286324),new g(1625708889,3596674266),new g(3336332676,2449992057),new g(3750905888,2821358087),new g(271614374,2300605125),new g(2999595186,740427564),new g(87593230,1388776818),new g(149129492,2334962391),new g(541795552,481379340),new g(2351735368,2269850802),new g(608733960,1133805922),new g(2602532471,2658691750),new g(3970345447,1359153177),new g(680658732,2386076427),new g(2207475987,1771444057),new g(1161328411,1959672182),new g(149130029,3255099982),new g(2177569856,683854372),new g(3661947790,2245419236),new g(1975966309,1770391529),new g(2582087242,2798283430)],E=[new g(524288,805437440),new g(2146400),new g(67108864,16777216),new g(1348481048,3681400539),new g(11702,2759852034),new g(1092883008,306782344),new g(1065248,1073742080),new g(2450071634,613598240),new g(157651673,204527616),new g(3277862616,2954562566),new g(1815534349,409731075),new g(2954587142,2911241057),new g(1533925085,905970103),new g(230032140,3289526556),new g(3068358150,56077),new g(3674310171,152604166),new g(1907829602,7198427),new g(8390944,1076101705),new g(2420711618,545409280),new g(1074040832,302064768),new g(2760925472,1428467018),new g(38273045,1083326496),new g(1212191753,2454856978),new g(603981856,1226838017),new g(541721760,689080612),new g(349513,2416455890),new g(616710196,154440460),new g(40379539,68708608),new g(1629493832,2588509714),new g(894585300,204767233),new g(2483889154,616827184),new g(153412173,440402074),new g(110231814,1644468298),new g(2456888978,2454277460),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756,1227133513),new g(2454267026,613566756),new g(1227133513,2454267026),new g(613566756)];class F extends m{constructor(e){super(e,2,[0,2,1,0,1,0,-1,0,0,-1,0,-1,-1,-1,-1,-1,-2,-1,-1,-1,-2,-1,-1,-2,-1,-1,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2])}transition(e,t,i){let s=Math.floor(e/(this._w+1)),n=e%(this._w+1);if(t===this._w){if(s<3){const e=3*i+s;n+=m.unpack(D,e,1),s=m.unpack(R,e,2)-1}}else if(t===this._w-1){if(s<5){const e=5*i+s;n+=m.unpack(N,e,1),s=m.unpack(A,e,3)-1}}else if(t===this._w-2){if(s<13){const e=13*i+s;n+=m.unpack(z,e,2),s=m.unpack(P,e,4)-1}}else if(t===this._w-3){if(s<28){const e=28*i+s;n+=m.unpack(j,e,2),s=m.unpack(M,e,5)-1}}else if(t===this._w-4){if(s<45){const e=45*i+s;n+=m.unpack($,e,3),s=m.unpack(T,e,6)-1}}else if(s<45){const e=45*i+s;n+=m.unpack(E,e,3),s=m.unpack(q,e,6)-1}return-1===s?-1:s*(this._w+1)+n}}class L{constructor(e,t){this._word=e,this._editDistance=t,this._alphabet=[...new Set(this._word)].sort(((e,t)=>e-t)),this._numRanges=0,this._rangeLower=new Array(this._alphabet.length+2),this._rangeUpper=new Array(this._alphabet.length+2);let i=0;for(let e=0;e<this._alphabet.length;e++){const t=this._alphabet[e];t>i&&(this._rangeLower[this._numRanges]=i,this._rangeUpper[this._numRanges]=t-1,this._numRanges++),i=t+1}i<=u&&(this._rangeLower[this._numRanges]=i,this._rangeUpper[this._numRanges]=u,this._numRanges++),this._description=1===t?new O(e.length):new F(e.length)}toAutomaton(){let e=new p;const t=2*this._editDistance+1,i=this._description.size();e.createState();for(let t=1;t<i;t++){let i=e.createState();e.setAccept(i,this._description.isAccept(t))}for(let s=0;s<i;s++){const i=this._description.getPosition(s);if(i<0)continue;const n=i+Math.min(this._word.length-i,t);for(let t=0;t<this._alphabet.length;t++){const r=this._alphabet[t],o=this._getVector(r,i,n),a=this._description.transition(s,i,o);a>=0&&e.addTransition(s,a,r,r)}const r=this._description.transition(s,i,0);if(r>=0)for(let t=0;t<this._numRanges;t++)e.addTransition(s,r,this._rangeLower[t],this._rangeUpper[t])}return e.finishState(),e}_getVector(e,t,i){let s=0;for(let n=t;n<i;n++)s<<=1,this._word[n]===e&&(s|=1);return s}}function J(e,t){if(void 0===t)return 1;if("number"==typeof t)return t<0?e+t:t;let i=e;if(t.includes("<")){for(const s of t.split(" ")){const t=s.split("<");if(e<=parseInt(t[0]))return i;i=J(e,t[1])}return i}if(t.includes("%")){const e=i*parseInt(t.slice(0,-1))*.01;i=e<0?i+Math.ceil(e):Math.floor(e)}else{const e=parseInt(t);i=e<0?i+e:e}return i<1?1:i}class V{constructor(e,t){this._invIdxs=e,this._docs=t,this._scorer=new d(this._invIdxs)}search(e){let t=this._recursive(e.query,!0);if(void 0===e.calculate_scoring||e.calculate_scoring)return this._scorer.finalScore(e,t);const i={};for(const e of t.keys())i[e]={score:1};return i}setDirty(){this._scorer.setDirty()}_recursive(e,t){let i=new Map;const s=void 0!==e.boost?e.boost:1,n=void 0!==e.field?e.field:null;let r=null,a=null;switch(void 0!==this._invIdxs[n]&&(r=this._invIdxs[n].root,a=this._invIdxs[n].analyzer),e.type){case"bool":if(i=null,void 0!==e.must&&(i=this._getUnique(e.must,t,i)),void 0!==e.filter&&(i=this._getUnique(e.filter,null,i)),void 0!==e.should){const s=this._getAll(e.should,t);let n=!1;null===i&&(n=!0,i=new Map);const r=Math.max(1,J(e.should.length,e.minimum_should_match));if(n&&1===r)i=s;else for(const[e,t]of s)t.length>=r&&(i.has(e)?i.get(e).push(...t):n?i.set(e,t):i.delete(e))}if(null===i&&(i=this._recursive({type:"match_all"},!1)),void 0!==e.not){let t=this._getAll(e.not,null);for(const e of t.keys())i.has(e)&&i.delete(e)}if(1!==s)for(const[e,t]of i)for(let e=0;e<t.length;e++)t[e].boost*=s;break;case"term":{const o=l(e.value);let a=h.getTermIndex(o,r);this._scorer.score(n,s,a,t,i,o);break}case"terms":for(let o=0;o<e.value.length;o++){const a=l(e.value[o]);let d=h.getTermIndex(a,r);this._scorer.score(n,s,d,t,i,a)}break;case"fuzzy":{const[o,a]=function(e,t){let i=l(e.value),s=void 0!==e.fuzziness?e.fuzziness:"AUTO";"AUTO"===s&&(s=i.length<=2?0:i.length<=5?1:2);let n=void 0!==e.prefix_length?e.prefix_length:0,r=void 0!==e.extended&&e.extended;0===s&&(n=i.length);let o=[],a=t,d=i.slice(0,n),u=i,f=0;if(0!==n&&(a=h.getTermIndex(d,a),u=u.slice(n)),null===a)return[o,f];if(0===u.length){if(r){const e=h.extendTermIndex(a);for(let t=0;t<e.length;t++)o.push({index:e[t].index,term:e[t].term,boost:1}),f=Math.max(f,e[t].index.df)}else void 0!==a.dc&&(o.push({index:a,term:i,boost:1}),f=a.df);return[o,f]}const _=[0],p=new c(new L(u,s).toAutomaton());function g(e,t,i){let n=0;if(-1!==(e=p.step(e,0))&&p.isAccept(e)&&(n++,-1!==(e=p.step(e,0))&&p.isAccept(e)&&n++,t.length<i.length)){if(n!==s)return function(e,t){let i,s,n,r;const o=Array(e.length+1);for(i=0;i<=e.length;i++)o[i]=i;for(i=1;i<=t.length;i++){for(n=i,s=1;s<=e.length;s++)t[i-1]===e[s-1]?r=o[s-1]:(r=Math.min(o[s-1]+1,Math.min(n+1,o[s]+1)),i>1&&s>1&&t[i-2]===e[s-1]&&e[s-2]===t[i-1]&&(r=Math.min(r,o[s-1]-(e[s-1]===t[i-1]?1:0)))),o[s-1]=n,n=r;o[e.length]=n}return o[e.length]}(t,i);n-=i.length-t.length}return s-n}function w(e,t,s){if(_[_.length-1]=t,-1!==(e=p.step(e,t))){if(p.isAccept(e)){if(r){const e=h.extendTermIndex(s);for(let t=0;t<e.length;t++)o.push({index:e[t].index,term:e[t].term,boost:1}),f=Math.max(f,e[t].index.df);return}if(void 0!==s.df){const t=g(e,_,u),n=Math.max(0,1-t/Math.min(d.length+_.length,i.length));o.push({index:s,term:[...d,..._],boost:n}),f=Math.max(f,s.df)}}_.push(0);for(const t of s)w(e,t[0],t[1]);_.pop()}}for(const e of a)w(0,e[0],e[1]);return[o,f]}(e,r);for(let e=0;e<o.length;e++)this._scorer.score(n,s*o[e].boost,o[e].index,t,i,o[e].term,a);break}case"wildcard":{const o=void 0!==e.enable_scoring&&e.enable_scoring,a=function(e,t){let i=l(e.value),s=[];function n(e,t=0,r=[],o=!1){if(null!==e)if(t!==i.length)if(o||92!==i[t])if(o||63!==i[t])if(o||42!==i[t])n(h.getTermIndex([i[t]],e),t+1,[...r,i[t]]);else if(t+1===i.length){const i=h.extendTermIndex(e);for(let e=0;e<i.length;e++)n(i[e].index,t+1,[...r,...i[e].term])}else{n(e,t+1,r,!1);const i=[{index:e,term:[]}];do{const e=i.pop();for(const s of e.index)n(s[1],t+1,[...r,...e.term,s[0]]),i.push({index:s[1],term:[...e.term,s[0]]})}while(0!==i.length)}else for(const i of e)n(i[1],t+1,[...r,i[0]]);else n(e,t+1,r,!0);else void 0!==e.df&&s.push({index:e,term:r.slice()})}return n(t),s}(e,r);for(let e=0;e<a.length;e++)this._scorer.score(n,s,a[e].index,t&&o,i,a[e].term);break}case"match_all":for(let e of this._docs)this._scorer.scoreConstant(s,e,i);break;case"constant_score":{let t=this._getAll(e.filter,!1);for(const e of t.keys())this._scorer.scoreConstant(s,e,i);break}case"prefix":{const o=void 0!==e.enable_scoring&&e.enable_scoring,a=l(e.value),d=h.getTermIndex(a,r);if(null!==d){const e=h.extendTermIndex(d);for(let r=0;r<e.length;r++)this._scorer.score(n,s,e[r].index,t&&o,i,[...a,...e[r].term])}break}case"exists":if(null!==r)for(const e of this._invIdxs[n].docStore.keys())this._scorer.scoreConstant(s,e,i);break;case"match":{const r=o(a,e.value),l={type:"bool"},h=[];if("or"===(void 0!==e.operator?e.operator:"or")?(void 0!==e.minimum_should_match&&(l.minimum_should_match=e.minimum_should_match),l.should=h):l.must=h,l.boost=s,void 0!==e.fuzziness){let t=void 0!==e.prefix_length?e.prefix_length:2,i=void 0!==e.extended&&e.extended;for(let s=0;s<r.length;s++)h.push({type:"fuzzy",field:n,value:r[s],fuzziness:e.fuzziness,prefix_length:t,extended:i})}else for(let e=0;e<r.length;e++)h.push({type:"term",field:n,value:r[e]});i=this._recursive(l,t);break}}return i}_getUnique(e,t,i){if(0===e.length)return i;for(let s=0;s<e.length;s++){let n=this._recursive(e[s],t);if(null!==i)for(const e of i.keys())n.has(e)?i.get(e).push(...n.get(e)):i.delete(e);else i=this._recursive(e[0],t)}return i}_getAll(e,t,i=new Map){for(let s=0;s<e.length;s++){let n=this._recursive(e[s],t);for(const e of n.keys())i.has(e)?i.get(e).push(...n.get(e)):i.set(e,n.get(e))}return i}}var B=i(0);class U{constructor(e=[],t){this._invIdxs={};for(let t=0;t<e.length;t++){let i=e[t];this._invIdxs[i.field]=new h(i)}this._id=t,this._docs=new Set,this._idxSearcher=new V(this._invIdxs,this._docs)}static register(){B.a.FullTextSearch=U}addDocument(e,t=e[this._id]){let i=Object.keys(this._invIdxs);for(let s,n=0;i.length,s=i[n];n++){let i=e[s];if(null!=i){if("string"!=typeof i){if("number"!=typeof i)throw TypeError("Unsupported field type for full text search.");i=i.toString()}this._invIdxs[s].insert(i,t)}}this._docs.add(t),this._idxSearcher.setDirty()}removeDocument(e,t=e[this._id]){let i=Object.keys(this._invIdxs);for(let e=0;e<i.length;e++)this._invIdxs[i[e]].remove(t);this._docs.delete(t),this._idxSearcher.setDirty()}updateDocument(e,t=e[this._id]){this.removeDocument(e,t),this.addDocument(e,t)}clear(){for(let e of this._docs)this.removeDocument(null,e)}search(e){return this._idxSearcher.search(e)}toJSON(){let e={id:this._id,ii:{}},t=Object.keys(this._invIdxs);for(let i=0;i<t.length;i++){const s=t[i];e.ii[s]=this._invIdxs[s].toJSON()}return e}static fromJSONObject(e,t={}){let i=new U([],e.id),s=Object.keys(e.ii);for(let n=0;n<s.length;n++){const r=s[n];i._invIdxs[r]=h.fromJSONObject(e.ii[r],t[r])}return i}}i.d(t,"FullTextSearch",(function(){return U})),i.d(t,"analyze",(function(){return o})),i.d(t,"StandardAnalyzer",(function(){return a})),i.d(t,"whitespaceTokenizer",(function(){return s})),i.d(t,"lowercaseTokenFilter",(function(){return n})),i.d(t,"uppercaseTokenFilter",(function(){return r})),U.Analyzer={},U.Analyzer.analyze=o,U.Analyzer.StandardAnalyzer=a,U.Tokenizer={},U.Tokenizer.whitespaceTokenizer=s,U.TokenFilter={},U.TokenFilter.lowercaseTokenFilter=n,U.TokenFilter.uppercaseTokenFilter=r,t.default=U},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i}])},e.exports=s()},1061:function(e,t,i){"use strict";i.r(t);var s=i(1050),n=i.n(s),r=i(1051),o=i.n(r),a=i(1052);i.n(a).a.register();var l,h,d=["/","/standards","/topics"],c=function(){var e={},t=[];Array.from(arguments).forEach((i=>{"string"==typeof i?t.push(i):"object"==typeof i&&(e=i)}));var{text:i=!1,deep:s=!1}=e,r="/".concat(t.join("/").replace(/\/+/g,"/")),o=!r||!!d.find((e=>e===r)),a=o?{dir:s?{$regex:new RegExp("^".concat(r))}:r}:{path:r},l=o?[]:[e=>e[0]];return new n.a({query:h.chain().find(a,!o),path:r,postprocess:l,text:i},{fullTextSearchFields:["title","description","slug","text"]})};t.default=e=>((l=new o.a("content.db")).loadJSONObject(e),h=l.getCollection("items"),c)}}]);